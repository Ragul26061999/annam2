(()=>{var e={};e.id=921,e.ids=[921],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8292:(e,t,s)=>{Promise.resolve().then(s.bind(s,31462))},10022:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19750:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=s(65239),r=s(48088),l=s(88170),n=s.n(l),i=s(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d={children:["",{children:["appointments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,31462)),"/Users/nisha/Desktop/hms/untitled folder/project/app/appointments/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/Users/nisha/Desktop/hms/untitled folder/project/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/nisha/Desktop/hms/untitled folder/project/app/appointments/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/appointments/page",pathname:"/appointments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},25541:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31462:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nisha/Desktop/hms/untitled folder/project/app/appointments/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nisha/Desktop/hms/untitled folder/project/app/appointments/page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},41550:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},41862:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58276:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var a=s(60687),r=s(43210),l=s(96474),n=s(25541),i=s(40228),o=s(5336),d=s(48730),c=s(35071),m=s(99270),x=s(93613),h=s(41862),u=s(15574),p=s(58869),g=s(81904),b=s(60137),f=s(10022),j=s(11860),y=s(43649),N=s(97992),v=s(12837),w=s(23026),A=s(48340),C=s(41550),k=s(47033),D=s(14952),S=s(72589),_=s(96446),P=s(71147),z=s(92300);let M=({selectedDate:e,onDateSelect:t,minDate:s,maxDate:l,disabledDates:n=[],className:o=""})=>{let[d,c]=(0,r.useState)(new Date),[m,x]=(0,r.useState)("current"),h=new Date,u=new Date(h.getFullYear(),h.getMonth()+1,1);(0,r.useEffect)(()=>{"current"===m?c(h):c(u)},[m]);let p=e=>new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),g=e=>new Date(e.getFullYear(),e.getMonth(),1).getDay(),b=(e,t,s)=>`${e}-${String(t+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,f=e=>{let t=new Date(e),a=new Date;return a.setHours(0,0,0,0),!!(t<a||s&&e<s||l&&e>l||n.includes(e))};return(0,a.jsxs)("div",{className:`bg-white rounded-2xl shadow-lg border border-gray-200 p-6 ${o}`,children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,a.jsxs)("div",{className:"bg-gray-100 rounded-xl p-1 flex",children:[(0,a.jsx)("button",{onClick:()=>x("current"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-200 ${"current"===m?"bg-white text-blue-600 shadow-md":"text-gray-600 hover:text-blue-600"}`,children:"This Month"}),(0,a.jsx)("button",{onClick:()=>x("next"),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-200 ${"next"===m?"bg-white text-blue-600 shadow-md":"text-gray-600 hover:text-blue-600"}`,children:"Next Month"})]})}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][d.getMonth()]," ",d.getFullYear()]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"current"===m?"Current Month":"Next Month"})]})]})}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"h-8 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:e})},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2",children:(s=>{let r=s.getFullYear(),l=s.getMonth(),n=p(s),i=g(s),o=[];for(let e=0;e<i;e++)o.push((0,a.jsx)("div",{className:"h-12 w-12"},`empty-${e}`));for(let s=1;s<=n;s++){let n=b(r,l,s),i=e===n,d=f(n),c=n===b(h.getFullYear(),h.getMonth(),h.getDate());o.push((0,a.jsx)("button",{onClick:()=>!d&&t(n),disabled:d,className:`
            h-12 w-12 rounded-xl font-semibold text-sm transition-all duration-200
            ${i?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg ring-4 ring-blue-200":d?"bg-gray-100 text-gray-400 cursor-not-allowed":c?"bg-orange-100 text-orange-600 border-2 border-orange-300 hover:bg-orange-200":"bg-white text-gray-700 border-2 border-gray-200 hover:border-blue-300 hover:bg-blue-50 shadow-sm hover:shadow-md"}
          `,children:s},s))}return o})(d)}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-orange-100 border-2 border-orange-300 rounded"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Today"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Selected"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-gray-100 rounded"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Unavailable"})]})]})]})};var T=s(16391);let E=[{id:1,title:"Select Doctor",icon:b.A},{id:2,title:"Choose Date & Time",icon:i.A},{id:3,title:"Select Patient",icon:p.A},{id:4,title:"Appointment Details",icon:f.A},{id:5,title:"Confirmation",icon:o.A}],$=["General Medicine","Cardiology","Neurology","Orthopedics","Pediatrics","Gynecology","Dermatology","Psychiatry","Emergency Medicine","Surgery"],q=[{value:"consultation",label:"General Consultation",duration:30},{value:"follow_up",label:"Follow-up Visit",duration:20},{value:"routine_checkup",label:"Routine Checkup",duration:45},{value:"emergency",label:"Emergency Consultation",duration:60}],I=({isOpen:e,onClose:t,onSuccess:s,preSelectedPatientId:l,preSelectedDoctorId:n})=>{let[c,h]=(0,r.useState)(1),[u,g]=(0,r.useState)(!1),[I,F]=(0,r.useState)(""),[R,L]=(0,r.useState)(""),[O,U]=(0,r.useState)({patientId:l||"",doctorId:n||"",appointmentDate:"",appointmentTime:"",sessionType:void 0,durationMinutes:30,type:"consultation",symptoms:"",chiefComplaint:"",notes:"",isEmergency:!1}),[G,Y]=(0,r.useState)([]),[B,H]=(0,r.useState)([]),[J,V]=(0,r.useState)({morning:[],afternoon:[],evening:[]}),[W,X]=(0,r.useState)([]),[Z,K]=(0,r.useState)(null),[Q,ee]=(0,r.useState)(null),[et,es]=(0,r.useState)(""),[ea,er]=(0,r.useState)(""),[el,en]=(0,r.useState)(""),[ei,eo]=(0,r.useState)(""),[ed,ec]=(0,r.useState)(!1),[em,ex]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&(ep(),n&&h(2),l&&h(n?4:3))},[e,n,l]);let ep=async()=>{try{g(!0);let[e,t]=await Promise.all([(0,P.oR)(),(0,_.uE)({limit:100})]);Y(e||[]);let s=(t.patients||[]).map(e=>({id:e.id,patient_id:e.patient_id,name:e.name||"",phone:e.phone,email:e.email,date_of_birth:e.date_of_birth,gender:e.gender,status:e.status})),a=s.filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id));if(H(a),n&&e){let t=e.find(e=>e.id===n);t&&(K(t),U(e=>({...e,doctorId:t.id})))}if(l){let e=s.find(e=>e.id===l);e&&(ee(e),U(t=>({...t,patientId:e.id})))}}catch(e){console.error("Error loading data:",e),F("Failed to load data. Please try again.")}finally{g(!1)}},eg=async(e,t)=>{try{g(!0);let s=await (0,S.pN)(e,t,O.isEmergency),a={morning:[],afternoon:[],evening:[]};s.forEach(e=>{if(e.available){let t=parseInt(e.time.split(":")[0]);t<12?a.morning.push(e.time):t<17?a.afternoon.push(e.time):a.evening.push(e.time)}}),V(a)}catch(e){console.error("Error loading slots:",e),F("Failed to load available time slots.")}finally{g(!1)}},eb=e=>{K(e),U(t=>({...t,doctorId:e.id})),F(""),ef(e.id)},ef=async e=>{let t=ew(),s=eA(),{data:a,error:r}=await T.ND.from("appointments").select("appointment_date").eq("doctor_id",e).gte("appointment_date",t).lte("appointment_date",s).in("status",["scheduled","confirmed","in_progress"]);if(r)return;let l=a.reduce((e,t)=>(e[t.appointment_date]=(e[t.appointment_date]||0)+1,e),{}),n=Z?.max_patients_per_day||20;X(Object.keys(l).filter(e=>l[e]>=n))},ej=e=>{ee(e),U(t=>({...t,patientId:e.id})),F("")},ey=e=>{let t=J[e];t.length>0&&U(s=>({...s,sessionType:e,appointmentTime:t[0]}))},eN=async()=>{try{g(!0),F("");let e=await (0,S.gG)(O),t=(0,S.ic)(e?.notes);L(t?`Appointment booked successfully! Your token number is ${t}.`:"Appointment booked successfully!"),setTimeout(()=>{s?.(e),ev()},2e3)}catch(e){console.error("Error creating appointment:",e),F(e.message||"Failed to book appointment. Please try again.")}finally{g(!1)}},ev=()=>{h(1),U({patientId:"",doctorId:"",appointmentDate:"",appointmentTime:"",durationMinutes:30,type:"consultation",symptoms:"",chiefComplaint:"",notes:"",isEmergency:!1}),K(null),ee(null),es(""),er(""),en(""),eo(""),V({morning:[],afternoon:[],evening:[]}),F(""),L(""),ec(!1),t()},ew=()=>new Date().toISOString().split("T")[0],eA=()=>{let e=new Date;return e.setMonth(e.getMonth()+3),e.toISOString().split("T")[0]},eC=G.filter(e=>{let t=!et||e.specialization===et,s=!ea||e.user?.name?.toLowerCase().includes(ea.toLowerCase())||e.specialization.toLowerCase().includes(ea.toLowerCase());return t&&s}),ek=B.filter(e=>{if(!el)return!0;let t=el.toLowerCase();return e.name?.toLowerCase().includes(t)||e.patient_id?.toLowerCase().includes(t)||e.phone?.includes(el)});return e?(0,a.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Book Appointment"}),(0,a.jsxs)("div",{className:"text-sm text-blue-100",children:["Step ",c," of ",E.length,": ",E[c-1]?.title,Q&&c>=3&&(0,a.jsxs)("span",{className:"ml-3 text-blue-100",children:["• ",Q.name]})]})]}),(0,a.jsx)("button",{onClick:ev,className:"p-2 hover:bg-white/20 rounded-lg transition-all duration-200",children:(0,a.jsx)(j.A,{size:20})})]}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:E.map((e,t)=>{let s=e.icon,r=c===e.id,l=c>e.id;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:`
                        flex items-center justify-center w-8 h-8 rounded-full transition-all duration-300
                        ${l?"bg-white text-blue-600":r?"bg-white text-blue-600 ring-2 ring-white/50":"bg-blue-500 text-blue-200"}
                      `,children:l?(0,a.jsx)(o.A,{size:14}):(0,a.jsx)(s,{size:14})}),(0,a.jsx)("span",{className:`text-xs font-medium hidden sm:block ${r||l?"text-white":"text-blue-200"}`,children:e.title})]}),t<E.length-1&&(0,a.jsx)("div",{className:`
                        w-8 h-0.5 mx-2 rounded-full transition-all duration-500
                        ${l?"bg-white":"bg-blue-400/30"}
                      `})]},e.id)})})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[I&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[(0,a.jsx)(x.A,{className:"text-red-500 mr-3",size:20}),(0,a.jsx)("span",{className:"text-red-700",children:I})]}),R&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[(0,a.jsx)(o.A,{className:"text-green-500 mr-3",size:20}),(0,a.jsx)("span",{className:"text-green-700",children:R})]}),1===c&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Choose Your Doctor"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Select a doctor to proceed with your appointment booking"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Specialization"}),(0,a.jsxs)("select",{value:et,onChange:e=>es(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-sm",children:[(0,a.jsx)("option",{value:"",children:"All Specializations"}),$.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Search Doctor"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,a.jsx)("input",{type:"text",placeholder:"Search by doctor name...",value:ea,onChange:e=>er(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-sm"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-gray-900",children:"Available Doctors"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[eC.length," doctors found"]})]}),(0,a.jsxs)("div",{className:"flex items-center bg-white px-3 py-1 rounded-lg shadow-sm",children:[(0,a.jsx)("input",{type:"checkbox",id:"emergency",checked:O.isEmergency,onChange:e=>U(t=>({...t,isEmergency:e.target.checked})),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),(0,a.jsxs)("label",{htmlFor:"emergency",className:"ml-2 text-xs font-medium text-gray-700 flex items-center",children:[(0,a.jsx)(y.A,{className:"w-3 h-3 mr-1 text-red-500"}),"Emergency"]})]})]}),!Z&&(0,a.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-3 rounded-r-lg",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)("p",{className:"text-xs text-blue-700",children:"Please select a doctor to continue to the next step."})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 max-h-[300px] overflow-y-auto pr-2",children:eC.map(e=>(0,a.jsx)("div",{onClick:()=>eb(e),className:`
                      group p-4 border rounded-lg cursor-pointer transition-all duration-300 hover:shadow-md
                      ${Z?.id===e.id?"border-blue-500 bg-blue-50 shadow-sm ring-2 ring-blue-200":"border-gray-200 hover:border-blue-300 bg-white hover:bg-blue-50"}
                    `,children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-white font-bold text-sm transition-all duration-300 ${Z?.id===e.id?"bg-blue-600 shadow-sm":"bg-gray-600 group-hover:bg-blue-500"}`,children:e.user?.name?.[0]||"D"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-bold text-sm text-gray-900 truncate",children:e.user?.name||"Unknown Doctor"}),(0,a.jsx)("p",{className:"text-blue-600 font-medium text-xs truncate",children:e.specialization})]}),Z?.id===e.id&&(0,a.jsx)("div",{className:"bg-green-500 rounded-full p-0.5",children:(0,a.jsx)(o.A,{className:"text-white",size:14})})]}),(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,a.jsx)(N.A,{size:12,className:"mr-1 text-gray-400"}),(0,a.jsxs)("span",{className:"font-medium",children:["Room ",e.room_number]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,a.jsx)(v.A,{size:12,className:"mr-1 text-green-500"}),(0,a.jsxs)("span",{className:"font-bold text-green-600",children:["₹",e.consultation_fee]})]})})]})]})]})},e.id))}),0===eC.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gray-100 rounded-full mb-3",children:(0,a.jsx)(b.A,{className:"h-6 w-6 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"No doctors found"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Try adjusting your search criteria or specialization filter."})]})]}),2===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"Select Date & Time"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Choose your preferred appointment date and time with Dr. ",Z?.user?.name]})]}),!Z&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-r-xl",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-red-400"}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:"Please go back and select a doctor first."})})]})}),Z&&(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-sm",children:Z.user?.name?.[0]||"D"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-bold text-gray-900",children:["Dr. ",Z.user?.name]}),(0,a.jsx)("p",{className:"text-blue-600 font-medium text-xs",children:Z.specialization}),(0,a.jsxs)("p",{className:"text-gray-600 text-xs",children:["Room ",Z.room_number," • ₹",Z.consultation_fee]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800",children:"Select Date"}),(0,a.jsx)(M,{selectedDate:ei,onDateSelect:e=>{eo(e),U(t=>({...t,appointmentDate:e})),Z&&eg(Z.id,e)},minDate:ew(),maxDate:eA(),disabledDates:(()=>{if(!Z||!Z.availability_hours)return[];try{let e=("string"==typeof Z.availability_hours?JSON.parse(Z.availability_hours):Z.availability_hours).workingDays||[];if(0===e.length)return[];let t=[],s=new Date,a=new Date;a.setMonth(a.getMonth()+3);let r=e.map(e=>"number"==typeof e?e:({sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6})[e.toLowerCase()]).filter(e=>void 0!==e);for(let e=new Date(s);e<=a;e.setDate(e.getDate()+1)){let s=e.getDay();r.includes(s)||t.push(e.toISOString().split("T")[0])}return[...t,...W]}catch(e){return console.error("Error parsing doctor availability:",e),[]}})(),className:"w-full"}),!ei&&(0,a.jsx)("div",{className:"bg-blue-50 border-l-2 border-blue-400 p-3 rounded-r-lg",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)("p",{className:"text-xs text-blue-700",children:"Please select a date to view available time slots."})})]})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800",children:"Available Times"}),ei?u?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-10 h-10 bg-blue-600 rounded-full mb-3",children:(0,a.jsx)(d.A,{className:"h-5 w-5 text-white animate-spin"})}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading available slots..."})]}):0===J.morning.length&&0===J.afternoon.length&&0===J.evening.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-10 h-10 bg-gray-100 rounded-full mb-3",children:(0,a.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("p",{className:"text-sm font-semibold",children:"No available slots"}),(0,a.jsx)("p",{className:"text-xs mt-1",children:"Please try selecting a different date."})]}):(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(J).map(([e,t])=>{if(0===t.length)return null;let s={morning:{icon:"\uD83C\uDF05",label:"Morning (9:00 AM - 12:00 PM)",color:"from-blue-100 to-blue-50"},afternoon:{icon:"☀️",label:"Afternoon (2:00 PM - 5:00 PM)",color:"from-blue-100 to-cyan-100"},evening:{icon:"\uD83C\uDF19",label:"Evening (6:00 PM - 9:00 PM)",color:"from-purple-100 to-indigo-100"}}[e],r=O.sessionType===e;return(0,a.jsxs)("button",{type:"button",onClick:()=>ey(e),disabled:0===t.length,className:`p-4 rounded-lg text-center transition-all duration-200 shadow-sm hover:shadow-md
                                ${r?"bg-blue-600 text-white ring-2 ring-blue-200":`bg-gradient-to-r ${s.color} hover:opacity-90`} 
                                ${0===t.length?"opacity-50 cursor-not-allowed":""}
                              `,children:[(0,a.jsx)("span",{className:"text-2xl mb-1 block",children:s.icon}),(0,a.jsx)("h5",{className:"font-bold text-sm mb-0.5",children:s.label}),(0,a.jsxs)("span",{className:"text-xs opacity-80 block",children:[t.length," slots available"]})]},e)})}):(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 text-center",children:[(0,a.jsx)(i.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Select a date to view available time slots"})]})]})]}),!O.appointmentTime&&ei&&(J.morning.length>0||J.afternoon.length>0||J.evening.length>0)&&(0,a.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-xl",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-blue-400"}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Please select a time slot to continue."})})]})})]}),3===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Patient Information"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Choose an existing patient or register a new one"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-3",children:"Search Patient"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,a.jsx)("input",{type:"text",value:el,onChange:e=>en(e.target.value),placeholder:"Search by name, ID, or phone number...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 text-sm"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[(0,a.jsxs)("button",{onClick:()=>ex(!0),className:"flex items-center px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all duration-200 text-xs font-medium",children:[(0,a.jsx)(y.A,{size:14,className:"mr-1"}),"Emergency"]}),(0,a.jsxs)("button",{onClick:()=>ec(!0),className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 text-xs font-medium",children:[(0,a.jsx)(w.A,{size:14,className:"mr-1"}),"New Patient"]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-800",children:"Available Patients"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[ek.length," found"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-80 overflow-y-auto",children:ek.map((e,t)=>(0,a.jsx)("div",{onClick:()=>ej(e),className:`
                        group relative p-4 border rounded-xl cursor-pointer transition-all duration-200
                        ${Q?.id===e.id?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 hover:border-blue-300 bg-white hover:shadow-sm"}
                      `,children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-medium text-sm ${Q?.id===e.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 group-hover:bg-blue-100 group-hover:text-blue-600"}`,children:e.name?.[0]||"P"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["ID: ",e.patient_id]}),(0,a.jsxs)("div",{className:"flex items-center mt-1 space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)(A.A,{size:12,className:"mr-1"}),e.phone]}),e.email&&(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)(C.A,{size:12,className:"mr-1"}),e.email]})]}),e.date_of_birth&&(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(i.A,{size:14,className:"mr-1 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Age: ",new Date().getFullYear()-new Date(e.date_of_birth).getFullYear()]})]})]})]}),Q?.id===e.id&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2",children:(0,a.jsx)(o.A,{className:"w-8 h-8 text-blue-500 bg-white rounded-full shadow-md"})})]})},`patient-${e.id}-${t}`))}),0===ek.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-600 mb-2",children:"No patients found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"No patients match your search criteria. Register a new patient to continue."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,a.jsxs)("button",{onClick:()=>ex(!0),className:"inline-flex items-center px-6 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl",children:[(0,a.jsx)(y.A,{size:20,className:"mr-2"}),"Emergency Registration"]}),(0,a.jsxs)("button",{onClick:()=>ec(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-500 to-amber-600 text-white rounded-xl hover:from-orange-600 hover:to-amber-700 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl",children:[(0,a.jsx)(w.A,{size:20,className:"mr-2"}),"Regular Registration"]})]})]}),!Q&&ek.length>0&&(0,a.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-xl",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-blue-400"}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"Please select a patient to continue with the appointment booking."})})]})})]})]}),4===c&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Appointment Details"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Provide additional information about your appointment"})]}),Q&&(0,a.jsx)("div",{className:"bg-blue-50 p-6 rounded-2xl border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-lg font-bold text-gray-900",children:["Appointment for: ",Q.name]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Patient ID: ",Q.patient_id," • Phone: ",Q.phone]})]})]})}),(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-3",children:"Appointment Type"}),(0,a.jsxs)("select",{value:O.type||"",onChange:e=>{let t=q.find(t=>t.value===e.target.value);t&&U(e=>({...e,type:t.value,durationMinutes:t.duration}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Select appointment type..."}),q.map(e=>(0,a.jsxs)("option",{value:e.value,children:[e.label," (",e.duration," min)"]},e.value))]}),!O.type&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Please select an appointment type"})]}),(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-xl",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Primary Reason for Visit *"}),(0,a.jsx)("textarea",{value:O.chiefComplaint||"",onChange:e=>U(t=>({...t,chiefComplaint:e.target.value})),placeholder:"Describe the main reason for this appointment...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 text-sm resize-none",required:!0}),!O.chiefComplaint&&(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Please provide the primary reason for your visit"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-xl",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Current Symptoms"}),(0,a.jsx)("textarea",{value:O.symptoms||"",onChange:e=>U(t=>({...t,symptoms:e.target.value})),placeholder:"List current symptoms...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm resize-none"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-xl",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Additional Notes"}),(0,a.jsx)("textarea",{value:O.notes||"",onChange:e=>U(t=>({...t,notes:e.target.value})),placeholder:"Allergies, medications, special requests...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-500 focus:border-gray-500 text-sm resize-none"})]})]})]}),5===c&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gradient-to-br from-orange-400 to-amber-500 rounded-full mb-3",children:(0,a.jsx)(o.A,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Confirm Your Appointment"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Please review the details below and confirm"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 via-amber-50 to-orange-100 p-6 rounded-2xl border border-gray-200 shadow-sm",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Patient"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 text-sm",children:Q?.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["ID: ",Q?.patient_id]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(b.A,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Doctor"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-semibold text-gray-900 text-sm",children:["Dr. ",Z?.user?.name]}),(0,a.jsx)("div",{className:"text-xs text-gray-600",children:Z?.specialization})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"w-4 h-4 text-white"})}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Date & Time"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-900 text-sm",children:new Date(O.appointmentDate).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 flex items-center justify-end",children:[(0,a.jsx)(d.A,{className:"w-3 h-3 mr-1"}),O.appointmentTime]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-white rounded-xl shadow-sm text-center",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Type"}),(0,a.jsx)("div",{className:"font-semibold text-gray-900 text-sm capitalize",children:O.type.replace("_"," ")})]}),(0,a.jsxs)("div",{className:"p-3 bg-white rounded-xl shadow-sm text-center",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Duration"}),(0,a.jsxs)("div",{className:"font-semibold text-gray-900 text-sm",children:[O.durationMinutes," min"]})]}),(0,a.jsxs)("div",{className:"p-3 bg-white rounded-xl shadow-sm text-center",children:[(0,a.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Fee"}),(0,a.jsxs)("div",{className:"font-semibold text-gray-900 text-sm text-green-600",children:["₹",Z?.consultation_fee]})]})]}),O.chiefComplaint&&(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-orange-600 mr-2"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Primary Reason"})]}),(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg border-l-2 border-orange-500 text-sm",children:O.chiefComplaint})]}),O.symptoms&&(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(x.A,{className:"w-4 h-4 text-orange-600 mr-2"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Symptoms"})]}),(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg border-l-2 border-orange-500 text-sm",children:O.symptoms})]}),O.notes&&(0,a.jsxs)("div",{className:"p-4 bg-white rounded-xl shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-orange-600 mr-2"}),(0,a.jsx)("span",{className:"text-gray-700 font-medium text-sm",children:"Additional Notes"})]}),(0,a.jsx)("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg border-l-2 border-orange-500 text-sm",children:O.notes})]})]}),(0,a.jsx)("div",{className:"mt-8 p-6 bg-gradient-to-r from-orange-100 to-amber-100 rounded-2xl border border-orange-200",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(o.A,{className:"w-6 h-6 text-orange-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-orange-800 mb-2",children:"Ready to Book?"}),(0,a.jsx)("p",{className:"text-orange-700 text-sm",children:"By confirming this appointment, you agree to arrive 15 minutes early and bring any relevant medical documents. You will receive a confirmation message with appointment details."})]})]})})]})]})]})}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-6 flex items-center justify-between border-t border-gray-200 flex-shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>{F(""),h(e=>Math.max(e-1,1))},disabled:1===c,className:"flex items-center px-6 py-3 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 rounded-xl hover:bg-gray-200 font-medium",children:[(0,a.jsx)(k.A,{size:20,className:"mr-2"}),"Previous"]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:E.map((e,t)=>(0,a.jsx)("div",{className:`
                  w-3 h-3 rounded-full transition-all duration-300
                  ${t+1<=c?"bg-gradient-to-r from-orange-500 to-amber-600 shadow-lg":"bg-gray-300"}
                `},t))}),c<E.length?(0,a.jsxs)("button",{onClick:()=>{if(F(""),1===c&&!Z)return void F("Please select a doctor before proceeding to the next step.");if(2===c){if(!O.appointmentDate)return void F("Please select an appointment date.");if(!O.appointmentTime)return void F("Please select an appointment time.")}if(3===c&&!Q)return void F("Please select a patient before proceeding.");if(4===c){if(!O.type)return void F("Please select an appointment type.");if(!O.chiefComplaint?.trim())return void F("Please provide the chief complaint.")}h(e=>Math.min(e+1,E.length))},className:"flex items-center px-8 py-3 bg-gradient-to-r from-orange-500 to-amber-600 text-white rounded-xl hover:from-orange-600 hover:to-amber-700 transition-all duration-200 shadow-lg font-semibold",children:["Next",(0,a.jsx)(D.A,{size:20,className:"ml-2"})]}):(0,a.jsx)("button",{onClick:eN,disabled:u,className:"flex items-center px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg font-semibold",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Booking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{size:20,className:"mr-3"}),"Confirm Booking"]})})]})]}),em&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsx)(z.A,{onSubmit:async(e,t)=>{try{eu(!0);let s=await (0,_.DW)({firstName:e.firstName,lastName:e.lastName,dateOfBirth:e.dateOfBirth,gender:e.gender,phone:e.phone,email:"",address:e.address,bloodGroup:e.bloodGroup||"",allergies:e.allergies||"",medicalHistory:"",currentMedications:"",chronicConditions:"",previousSurgeries:"",admissionDate:e.admissionDate,admissionTime:e.admissionTime,primaryComplaint:e.primaryComplaint,admissionType:"emergency",referringDoctorFacility:"",consultingDoctorName:"",consultingDoctorId:"",departmentWard:"",roomNumber:"",guardianName:"",guardianRelationship:"",guardianPhone:"",guardianAddress:"",emergencyContactName:e.emergencyContactName||"",emergencyContactPhone:e.emergencyContactPhone||"",emergencyContactRelationship:e.emergencyContactRelationship||"",insuranceProvider:"",insuranceNumber:"",initialSymptoms:"",referredBy:""},t);if(s.success){let e={id:s.patient.id,patient_id:s.patient.patient_id,name:s.patient.name||"",phone:s.patient.phone,email:s.patient.email||"",date_of_birth:s.patient.date_of_birth,gender:s.patient.gender,status:s.patient.status};H(t=>[e,...t]),ej(e),ex(!1)}}catch(e){console.error("Error registering patient:",e)}finally{eu(!1)}},onCancel:()=>ex(!1),isLoading:eh})})})]}):null};function F(){let[e,t]=(0,r.useState)(!1),[s,b]=(0,r.useState)([]),[f,j]=(0,r.useState)({total:0,scheduled:0,completed:0,cancelled:0,todayCount:0,upcomingCount:0}),[y,N]=(0,r.useState)(!0),[v,w]=(0,r.useState)(null),[A,C]=(0,r.useState)(new Date().toISOString().split("T")[0]),[k,D]=(0,r.useState)(""),[_,P]=(0,r.useState)("all"),[z,M]=(0,r.useState)(null),T=async()=>{try{N(!0),w(null);let e=await (0,S.Xj)({date:A,searchTerm:k||void 0,status:"all"===_?void 0:_,limit:50});b(e.appointments)}catch(e){console.error("Error fetching appointments:",e),w("Failed to load appointments. Please try again.")}finally{N(!1)}},E=async()=>{try{let e=await (0,S.ZR)();j(e)}catch(e){console.error("Error fetching stats:",e)}},$=async(e,t)=>{try{M(e),await (0,S.H8)(e,t),await T(),await E()}catch(e){console.error("Error updating appointment status:",e),w("Failed to update appointment status. Please try again.")}finally{M(null)}},q=e=>{if(!e)return"N/A";let t=e.match(/Token:\s*(\d+)/);return t?t[1]:"N/A"},F=(e,t)=>{let s=new Date,a=new Date(`${e}T${t}`);if(s.toDateString()!==a.toDateString())return!1;let r=s.getTime()-a.getTime();return r>=-9e5&&r<=18e5},R=e=>{switch(e){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"in_progress":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},L=e=>{switch(e){case"completed":return"from-green-500 to-green-600";case"cancelled":return"from-red-500 to-red-600";case"in_progress":return"from-yellow-500 to-yellow-600";default:return"from-blue-500 to-blue-600"}};return(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Appointments"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage patient appointments and schedules"})]}),(0,a.jsxs)("button",{onClick:()=>t(!0),className:"flex items-center bg-orange-500 hover:bg-orange-600 text-white px-4 py-2.5 rounded-xl font-medium text-sm transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,a.jsx)(l.A,{size:16,className:"mr-2"}),"New Appointment"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Today's Appointments"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:f.todayCount}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(n.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["Total: ",f.total]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(i.A,{className:"text-white",size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:f.completed}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(o.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-600",children:[f.total>0?Math.round(f.completed/f.total*100):0,"% success rate"]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"text-white",size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Scheduled"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:f.scheduled}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(d.A,{className:"h-3 w-3 text-orange-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-orange-600",children:["Upcoming: ",f.upcomingCount]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-300 to-orange-400 rounded-xl flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"text-white",size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Cancelled"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:f.cancelled}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(c.A,{className:"h-3 w-3 text-red-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-red-600",children:[f.total>0?Math.round(f.cancelled/f.total*100):0,"% cancellation"]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-red-500 to-red-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"text-white",size:20})})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-400"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search appointments by patient name, doctor, or ID...",value:k,onChange:e=>D(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center px-4 py-2.5 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 bg-white",children:[(0,a.jsx)(i.A,{size:16,className:"mr-2"}),(0,a.jsx)("input",{type:"date",value:A,onChange:e=>C(e.target.value),className:"bg-transparent focus:outline-none"})]}),(0,a.jsxs)("select",{value:_,onChange:e=>P(e.target.value),className:"px-4 py-2.5 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"})]})]})]})}),v&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-red-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-800 font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-red-700 text-sm",children:v})]}),(0,a.jsx)("button",{onClick:()=>w(null),className:"ml-auto text-red-500 hover:text-red-700",children:(0,a.jsx)(c.A,{className:"h-5 w-5"})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"p-5 border-b border-gray-100",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Appointments"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage and track patient appointments"})]}),y?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)(h.A,{className:"h-8 w-8 animate-spin text-orange-500"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading appointments..."})]}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(i.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No appointments found for the selected criteria."})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:s.map(e=>{let t=q(e.notes||null),s=e.patient?.name||"Unknown Patient",r=e.doctor?.user?.name||"Unknown Doctor",l=s.split(" ").map(e=>e.charAt(0)).join("").toUpperCase();return(0,a.jsx)("div",{className:"p-5 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:`w-12 h-12 bg-gradient-to-r ${L(e.status)} rounded-xl flex items-center justify-center`,children:(0,a.jsx)("span",{className:"text-white font-semibold text-sm",children:l})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:s}),(0,a.jsx)("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${R(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),"N/A"!==t&&(0,a.jsxs)("span",{className:"flex items-center px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:[(0,a.jsx)(u.A,{size:12,className:"mr-1"}),t]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-1 flex-wrap",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center",children:[(0,a.jsx)(d.A,{size:14,className:"mr-1"}),new Date(e.appointment_date).toLocaleDateString()," • ",e.appointment_time]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center",children:[(0,a.jsx)(p.A,{size:14,className:"mr-1"}),r]}),e.chief_complaint&&(0,a.jsxs)("span",{className:"text-sm text-gray-600 flex items-center",children:[(0,a.jsx)("span",{className:"mr-1",children:"•"}),e.chief_complaint]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["scheduled"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>$(e.id,"completed"),disabled:z===e.id||!F(e.appointment_date,e.appointment_time),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${F(e.appointment_date,e.appointment_time)?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-400 cursor-not-allowed"} disabled:opacity-50`,title:F(e.appointment_date,e.appointment_time)?"Mark appointment as completed":"Complete button is only active during appointment session (15 min before to 30 min after)",children:z===e.id?(0,a.jsx)(h.A,{className:"h-3 w-3 animate-spin"}):"Complete"}),(0,a.jsx)("button",{onClick:()=>$(e.id,"cancelled"),disabled:z===e.id,className:"px-3 py-1.5 bg-red-100 text-red-700 text-xs font-medium rounded-lg hover:bg-red-200 transition-colors disabled:opacity-50",children:z===e.id?(0,a.jsx)(h.A,{className:"h-3 w-3 animate-spin"}):"Cancel"})]}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(g.A,{size:16})})]})]})},e.id)})})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{className:"bg-white border border-gray-200 text-gray-700 px-6 py-2.5 rounded-xl font-medium text-sm hover:bg-gray-50 transition-colors",children:"Load More Appointments"})}),e&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-white",children:(0,a.jsx)(I,{isOpen:!0,onClose:()=>t(!1),onSuccess:e=>{console.log("Appointment created:",e),T(),t(!1)}})})]})}},61444:(e,t,s)=>{Promise.resolve().then(s.bind(s,58276))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,462,658,463,308,525,593,968,300],()=>s(19750));module.exports=a})();