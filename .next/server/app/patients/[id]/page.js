(()=>{var e={};e.id=961,e.ids=[961],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6727:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},10022:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11860:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},11997:e=>{"use strict";e.exports=require("punycode")},13861:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28559:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},38391:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var a=s(60687),r=s(43210),i=s.n(r),n=s(93613),l=s(58869),d=s(28559),o=s(63143),c=s(96474),m=s(40228),x=s(48340),p=s(41550),h=s(97992),u=s(67760),g=s(43649),y=s(60137),b=s(79410),j=s(48730),f=s(10022),v=s(13861),N=s(58559),w=s(41312),_=s(6727),k=s(93508),A=s(99891),S=s(11860),D=s(96446),P=s(16391);async function M(e){try{let t=e.bmi;if(e.height&&e.weight){let s=e.height/100;t=e.weight/(s*s),t=Math.round(10*t)/10}let s={patient_id:e.patientId,recorded_by:e.recordedBy||null,systolic_bp:e.systolicBp||null,diastolic_bp:e.diastolicBp||null,heart_rate:e.heartRate||null,temperature:e.temperature||null,respiratory_rate:e.respiratoryRate||null,oxygen_saturation:e.oxygenSaturation||null,weight:e.weight||null,height:e.height||null,bmi:t||null,blood_glucose:e.bloodGlucose||null,pain_scale:e.painScale||null,recorded_at:e.recordedAt||new Date().toISOString(),notes:e.notes||null},{data:a,error:r}=await P.ND.from("vitals").insert([s]).select("*").single();if(r)throw console.error("Error recording vitals:",r),Error(`Failed to record vitals: ${r.message}`);return a}catch(e){throw console.error("Error recording vitals:",e),e}}let C=async e=>{try{let{data:t,error:s}=await P.ND.from("vitals").select(`
        *,
        patient:patients(id, patient_id, name),
        user:recorded_by(name)
      `).eq("patient_id",e).order("recorded_at",{ascending:!1});if(s){if("42P01"===s.code||"PGRST200"===s.code)return console.log("Vitals table does not exist, returning empty array"),[];throw console.error("Error fetching vitals:",s),Error("Failed to fetch vitals")}return t||[]}catch(e){if(e.message?.includes("relation")&&e.message?.includes("does not exist"))return console.log("Vitals table does not exist, returning empty array"),[];throw console.error("Exception in getPatientVitals:",e),e}};async function E(e){try{let{data:t,error:s}=await supabase.from("vitals").select(`
        *,
        patient:patients(id, patient_id, name),
        recorded_by_user:users!recorded_by(id, name, role),
        visit:patient_visits(id, visit_id, visit_date, visit_type)
      `).eq("patient_id",e).order("recorded_at",{ascending:!1}).limit(1).single();if(s){if("42P01"===s.code||"PGRST200"===s.code)return console.log("Vitals table does not exist, returning null"),null;if("PGRST116"!==s.code)throw console.error("Error fetching latest vitals:",s),Error(`Failed to fetch latest vitals: ${s.message}`)}return t||null}catch(e){if(e.message?.includes("relation")&&e.message?.includes("does not exist"))return console.log("Vitals table does not exist, returning null"),null;throw console.error("Error fetching latest vitals:",e),e}}async function R(e,t){try{let s=t.bmi;if(t.height&&t.weight){let e=t.height/100;s=t.weight/(e*e),s=Math.round(10*s)/10}let a={};void 0!==t.systolicBp&&(a.systolic_bp=t.systolicBp),void 0!==t.diastolicBp&&(a.diastolic_bp=t.diastolicBp),void 0!==t.heartRate&&(a.heart_rate=t.heartRate),void 0!==t.temperature&&(a.temperature=t.temperature),void 0!==t.respiratoryRate&&(a.respiratory_rate=t.respiratoryRate),void 0!==t.oxygenSaturation&&(a.oxygen_saturation=t.oxygenSaturation),void 0!==t.weight&&(a.weight=t.weight),void 0!==t.height&&(a.height=t.height),void 0!==s&&(a.bmi=s),void 0!==t.bloodGlucose&&(a.blood_glucose=t.bloodGlucose),void 0!==t.painScale&&(a.pain_scale=t.painScale),void 0!==t.notes&&(a.notes=t.notes);let{data:r,error:i}=await P.ND.from("vitals").update(a).eq("id",e).select(`
        *,
        patient:patients(id, patient_id, name),
        recorded_by_user:users!recorded_by(id, name, role),
        visit:patient_visits(id, visit_id, visit_date, visit_type)
      `).single();if(i)throw console.error("Error updating vital record:",i),Error(`Failed to update vital record: ${i.message}`);return r}catch(e){throw console.error("Error updating vital record:",e),e}}let q=async e=>{if(!e.patientId)throw Error("Patient ID is required to create medical history.");try{let{data:t,error:s}=await P.ND.from("medical_history").insert({patient_id:e.patientId,event_type:e.eventType,event_name:e.eventName,event_date:e.eventDate,details:e.details||null,doctor_name:e.doctorName||null,facility_name:e.facilityName||null}).select().single();if(s){if("42P01"===s.code)throw Error("Medical history table does not exist. Please contact system administrator.");throw console.error("Error creating medical history:",s),Error("Failed to create medical history entry.")}return{...t,source:"history"}}catch(e){throw console.error("An unexpected error occurred while creating medical history:",e),e}},B=async e=>{let t=[{patientId:e,eventType:"Diagnosis",eventName:"Hypertension",eventDate:new Date(Date.now()-2592e6).toISOString(),details:"Diagnosed with Stage 1 Hypertension. Prescribed lifestyle changes and monitoring.",doctorName:"Dr. Sarah Johnson",facilityName:"City General Hospital"},{patientId:e,eventType:"Surgery",eventName:"Appendectomy",eventDate:new Date(Date.now()-15552e6).toISOString(),details:"Laparoscopic appendectomy performed due to acute appendicitis. Recovery was uneventful.",doctorName:"Dr. Michael Chen",facilityName:"University Medical Center"},{patientId:e,eventType:"Vaccination",eventName:"COVID-19 Vaccine",eventDate:new Date(Date.now()-7776e6).toISOString(),details:"Received second dose of COVID-19 vaccine. No adverse reactions reported.",doctorName:"Dr. Lisa Wong",facilityName:"Community Health Clinic"}],s=[];for(let e of t)try{let t=await q(e);s.push(t)}catch(e){console.error("Error adding dummy data:",e)}return s},I=async e=>{if(!e)return console.error("Patient ID is required to fetch medical history."),[];try{let t=[];try{let{data:s,error:a}=await P.ND.from("medical_history").select("*").eq("patient_id",e);a?"42P01"===a.code?console.log("Medical history table does not exist, skipping"):"PGRST116"!==a.code&&console.error("Error fetching medical history:",a):s&&s.forEach(e=>{t.push({...e,source:"history"})})}catch(e){e.message?.includes("relation")&&e.message?.includes("does not exist")?console.log("Medical history table does not exist, skipping"):console.warn("Medical history table may not exist:",e)}try{let{data:s,error:a}=await P.ND.from("patient_symptoms").select("*").eq("patient_id",e);a?"42P01"===a.code?console.log("Patient symptoms table does not exist, skipping"):"PGRST116"!==a.code&&console.error("Error fetching patient symptoms:",a):s&&s.forEach(e=>{t.push({id:e.id,patient_id:e.patient_id,event_type:"Symptom",event_name:e.symptom_name,event_date:e.recorded_at,details:`Severity: ${e.severity}, Onset: ${e.onset_date}`,doctor_name:null,facility_name:null,source:"symptom"})})}catch(e){e.message?.includes("relation")&&e.message?.includes("does not exist")?console.log("Patient symptoms table does not exist, skipping"):console.warn("Patient symptoms table may not exist:",e)}try{let{data:s,error:a}=await P.ND.from("patient_allergies").select("*").eq("patient_id",e);a?"42P01"===a.code?console.log("Patient allergies table does not exist, skipping"):"PGRST116"!==a.code&&console.error("Error fetching patient allergies:",a):s&&s.forEach(e=>{t.push({id:e.id,patient_id:e.patient_id,event_type:"Allergy",event_name:e.allergen,event_date:e.recorded_at,details:`Reaction: ${e.reaction}, Severity: ${e.severity}`,doctor_name:null,facility_name:null,source:"allergy"})})}catch(e){e.message?.includes("relation")&&e.message?.includes("does not exist")?console.log("Patient allergies table does not exist, skipping"):console.warn("Patient allergies table may not exist:",e)}return t.sort((e,t)=>new Date(t.event_date).getTime()-new Date(e.event_date).getTime()),t}catch(e){return console.error("An unexpected error occurred while fetching medical history:",e),[]}};function G({patientId:e,onClose:t,onSuccess:s}){let[i,n]=(0,r.useState)({patientId:e,eventType:"",eventName:"",eventDate:new Date().toISOString().split("T")[0],details:"",doctorName:"",facilityName:""}),[l,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),m=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s}))},x=async e=>{e.preventDefault(),d(!0),c(null);try{await q(i),s(),t()}catch(e){console.error("Error creating medical history:",e),c("Failed to create medical history entry. Please try again.")}finally{d(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Add Medical Event"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(S.A,{className:"h-5 w-5"})})]}),o&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:o}),(0,a.jsx)("form",{onSubmit:x,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"eventType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Type"}),(0,a.jsxs)("select",{id:"eventType",name:"eventType",value:i.eventType,onChange:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Event Type"}),(0,a.jsx)("option",{value:"Diagnosis",children:"Diagnosis"}),(0,a.jsx)("option",{value:"Surgery",children:"Surgery"}),(0,a.jsx)("option",{value:"Vaccination",children:"Vaccination"}),(0,a.jsx)("option",{value:"Medication",children:"Medication"}),(0,a.jsx)("option",{value:"Test",children:"Test/Lab Result"}),(0,a.jsx)("option",{value:"Procedure",children:"Procedure"}),(0,a.jsx)("option",{value:"Visit",children:"Visit"}),(0,a.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"eventName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Name"}),(0,a.jsx)("input",{type:"text",id:"eventName",name:"eventName",value:i.eventName,onChange:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"e.g., Appendectomy, Flu Shot, etc.",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"eventDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",id:"eventDate",name:"eventDate",value:i.eventDate,onChange:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"details",className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),(0,a.jsx)("textarea",{id:"details",name:"details",value:i.details||"",onChange:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",rows:3,placeholder:"Enter any relevant details about this medical event"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"doctorName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Doctor Name"}),(0,a.jsx)("input",{type:"text",id:"doctorName",name:"doctorName",value:i.doctorName||"",onChange:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Dr. Name (optional)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"facilityName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Facility Name"}),(0,a.jsx)("input",{type:"text",id:"facilityName",name:"facilityName",value:i.facilityName||"",onChange:m,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Hospital or clinic name (optional)"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:l,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:bg-orange-300",disabled:l,children:l?"Saving...":"Save Medical Event"})]})]})})]})})}function T({patientId:e,onSuccess:t}){let[s,i]=(0,r.useState)(!1),n=async()=>{if(e){i(!0);try{await B(e),t()}catch(e){console.error("Error adding dummy data:",e)}finally{i(!1)}}};return(0,a.jsx)("button",{onClick:n,disabled:s,className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2 disabled:bg-blue-300",children:s?"Adding...":"Add Dummy Data"})}var V=s(85814),F=s.n(V),H=s(16189);function z({params:e}){let t=i().use(e),s=(0,H.useRouter)(),[S,P]=(0,r.useState)(null),[M,E]=(0,r.useState)(!0),[R,q]=(0,r.useState)(null),[B,V]=(0,r.useState)("overview"),[z,L]=(0,r.useState)([]),[U,$]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(null),[Z,J]=(0,r.useState)(null),[K,X]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)([]),[et,es]=(0,r.useState)(!1),[ea,er]=(0,r.useState)(!1),ei=async()=>{try{E(!0);let e=await (0,D.bG)(t.id);P(e),X(!0);try{let e=await C(t.id);L(e)}catch(e){console.error("Error fetching vitals data:",e)}finally{X(!1)}es(!0);try{let e=await I(t.id);ee(e)}catch(e){console.error("Error fetching medical history data:",e)}finally{es(!1)}}catch(e){console.error("Error fetching patient data:",e),q(e instanceof Error?e.message:"Failed to load patient data")}finally{E(!1)}},en=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not specified",el=e=>e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Not specified";return M?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading patient data..."})]})}):R?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Patient"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:R}),(0,a.jsx)(F(),{href:"/patients",children:(0,a.jsx)("button",{className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Patients"})})]})}):S?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(F(),{href:"/patients",children:(0,a.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(d.A,{className:"h-5 w-5 text-gray-600"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:S.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-1",children:[(0,a.jsx)("span",{className:"text-lg font-mono text-orange-600",children:S.patient_id}),(0,a.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${(e=>{switch(e?.toLowerCase()){case"critical":return"text-red-500 bg-red-50 border-red-200";case"stable":return"text-green-500 bg-green-50 border-green-200";case"recovering":return"text-orange-500 bg-orange-50 border-orange-200";case"active":return"text-blue-500 bg-blue-50 border-blue-200";default:return"text-gray-500 bg-gray-50 border-gray-200"}})(S.status)}`,children:S.status?.charAt(0).toUpperCase()+S.status?.slice(1)||"Active"})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>s.push(`/patients/${S.patient_id}/edit`),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"Edit Patient"]}),(0,a.jsxs)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"New Appointment"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(l.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Personal Information"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Age:"}),(0,a.jsxs)("span",{className:"ml-2 font-medium",children:[(e=>{let t=new Date(e),s=new Date,a=s.getFullYear()-t.getFullYear(),r=s.getMonth()-t.getMonth();return(r<0||0===r&&s.getDate()<t.getDate())&&a--,a})(S.date_of_birth)," years"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Gender:"}),(0,a.jsx)("span",{className:"ml-2 font-medium capitalize",children:S.gender})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:S.phone})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:S.email})]}),(0,a.jsxs)("div",{className:"flex items-start text-sm",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-gray-400 mr-3 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Address:"}),(0,a.jsx)("p",{className:"ml-2 font-medium",children:S.address})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(u.A,{className:"h-5 w-5 text-green-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Medical Information"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Blood Group:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:S.blood_group||"Not specified"})]}),S.allergies&&(0,a.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[(0,a.jsxs)("div",{className:"flex items-center text-red-700 text-sm font-medium mb-1",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Allergies"]}),(0,a.jsx)("p",{className:"text-red-600 text-sm",children:S.allergies})]}),S.initial_symptoms&&(0,a.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,a.jsxs)("div",{className:"flex items-center text-yellow-700 text-sm font-medium mb-1",children:[(0,a.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Initial Symptoms"]}),(0,a.jsx)("p",{className:"text-yellow-600 text-sm",children:S.initial_symptoms})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(b.A,{className:"h-5 w-5 text-purple-600"})}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Admission Information"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[S.admission_date&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Admitted:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:el(S.admission_date)})]}),S.admission_type&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(f.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,a.jsx)("span",{className:"ml-2 font-medium capitalize",children:S.admission_type})]}),S.department_ward&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(b.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Department:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:S.department_ward})]}),S.room_number&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,a.jsx)("span",{className:"text-gray-600",children:"Room:"}),(0,a.jsx)("span",{className:"ml-2 font-medium",children:S.room_number})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:[(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-8 px-6",children:[{id:"overview",name:"Overview",icon:v.A},{id:"vitals",name:"Vitals",icon:N.A},{id:"medical-history",name:"Medical History",icon:u.A},{id:"contacts",name:"Contacts",icon:w.A},{id:"appointments",name:"Appointments",icon:m.A},{id:"billing",name:"Billing",icon:f.A}].map(e=>(0,a.jsxs)("button",{onClick:()=>V(e.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${B===e.id?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,a.jsx)(e.icon,{className:"h-4 w-4"}),e.name]},e.id))})}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===B&&(0,a.jsxs)("div",{className:"space-y-6",children:[S.primary_complaint&&(0,a.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,a.jsxs)("h4",{className:"font-medium text-orange-900 mb-2 flex items-center gap-2",children:[(0,a.jsx)(_.A,{className:"h-4 w-4"}),"Primary Complaint / Reason for Visit"]}),(0,a.jsx)("p",{className:"text-orange-800",children:S.primary_complaint})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.referring_doctor_facility&&(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Referring Doctor/Facility"}),(0,a.jsx)("p",{className:"text-blue-800",children:S.referring_doctor_facility})]}),S.referred_by&&(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Referred By"}),(0,a.jsx)("p",{className:"text-green-800",children:S.referred_by})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:"Patient registered"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:el(S.created_at)})]})]}),S.admission_date&&(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:"Patient admitted"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:el(S.admission_date)})]})]})]})]})]}),"vitals"===B&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Patient Vitals"}),(0,a.jsxs)("button",{onClick:()=>{Y(null),$(!0)},className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"Record New Vitals"]})]}),K?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin"})}):0===z.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)(N.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No vitals recorded"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"Get started by recording new vitals for this patient."}),(0,a.jsx)("button",{onClick:()=>{Y(null),$(!0)},className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Record First Vitals"})]}):(0,a.jsx)("div",{className:"space-y-4",children:z.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-900",children:["Recorded on ",new Date(e.recorded_at).toLocaleString()]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Recorded by: ",e.user?.name||"Unknown"]})]}),(0,a.jsx)("button",{onClick:()=>{Y(e),$(!0)},className:"text-orange-500 hover:text-orange-700 text-sm font-medium",children:"Edit"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.systolic_bp&&e.diastolic_bp&&(0,a.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-red-600 font-medium",children:"Blood Pressure"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-red-800",children:[e.systolic_bp,"/",e.diastolic_bp]})]}),e.heart_rate&&(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:"Heart Rate"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-blue-800",children:[e.heart_rate," ",(0,a.jsx)("span",{className:"text-sm",children:"bpm"})]})]}),e.temperature&&(0,a.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-yellow-600 font-medium",children:"Temperature"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-yellow-800",children:[e.temperature," ",(0,a.jsx)("span",{className:"text-sm",children:"\xb0C"})]})]}),e.oxygen_saturation&&(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"Oxygen Saturation"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-green-800",children:[e.oxygen_saturation,"%"]})]}),e.weight&&(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-purple-600 font-medium",children:"Weight"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-purple-800",children:[e.weight," ",(0,a.jsx)("span",{className:"text-sm",children:"kg"})]})]}),e.height&&(0,a.jsxs)("div",{className:"bg-indigo-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-indigo-600 font-medium",children:"Height"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-indigo-800",children:[e.height," ",(0,a.jsx)("span",{className:"text-sm",children:"cm"})]})]}),e.bmi&&(0,a.jsxs)("div",{className:"bg-teal-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-teal-600 font-medium",children:"BMI"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-teal-800",children:e.bmi})]}),e.blood_glucose&&(0,a.jsxs)("div",{className:"bg-pink-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-pink-600 font-medium",children:"Blood Glucose"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-pink-800",children:[e.blood_glucose," ",(0,a.jsx)("span",{className:"text-sm",children:"mg/dL"})]})]}),void 0!==e.pain_scale&&null!==e.pain_scale&&(0,a.jsxs)("div",{className:"bg-orange-50 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-orange-600 font-medium",children:"Pain Scale"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-orange-800",children:[e.pain_scale,"/10"]})]})]}),e.notes&&(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Notes:"})," ",e.notes]})})]},e.id))})]}),"medical-history"===B&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Medical History Timeline"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>er(!0),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"Add Medical Event"]}),S?.id&&(0,a.jsx)(T,{patientId:S.id,onSuccess:async()=>{es(!0);try{let e=await I(S.id);ee(e)}catch(e){console.error("Error fetching medical history:",e)}finally{es(!1)}}})]})]}),et?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-orange-200 border-t-orange-500 rounded-full animate-spin"})}):0===Q.length?(0,a.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No medical history found"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No medical events have been recorded for this patient."}),(0,a.jsx)("button",{onClick:()=>er(!0),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Record First Medical Event"})]}):(0,a.jsx)("div",{className:"space-y-6",children:Q.map(e=>(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-orange-500 rounded-full"}),(0,a.jsx)("div",{className:"w-px h-full bg-gray-300"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:e.event_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[new Date(e.event_date).toLocaleDateString()," - ",e.event_type]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.details}),e.doctor_name&&(0,a.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:["Doctor: ",e.doctor_name]}),e.facility_name&&(0,a.jsxs)("p",{className:"text-sm text-purple-600 mt-1",children:["Facility: ",e.facility_name]})]})]},e.id))}),ea&&S?.id&&(0,a.jsx)(G,{patientId:S.id,onClose:()=>er(!1),onSuccess:async()=>{es(!0);try{let e=await I(S.id);ee(e)}catch(e){console.error("Error fetching medical history:",e)}finally{es(!1)}}})]}),"contacts"===B&&(0,a.jsxs)("div",{className:"space-y-6",children:[(S.guardian_name||S.guardian_phone)&&(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,a.jsxs)("h4",{className:"font-medium text-purple-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),"Guardian / Attendant Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.guardian_name&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-purple-700 font-medium",children:"Name:"}),(0,a.jsx)("p",{className:"text-purple-800",children:S.guardian_name})]}),S.guardian_relationship&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-purple-700 font-medium",children:"Relationship:"}),(0,a.jsx)("p",{className:"text-purple-800 capitalize",children:S.guardian_relationship})]}),S.guardian_phone&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-purple-700 font-medium",children:"Phone:"}),(0,a.jsx)("p",{className:"text-purple-800",children:S.guardian_phone})]}),S.guardian_address&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("span",{className:"text-sm text-purple-700 font-medium",children:"Address:"}),(0,a.jsx)("p",{className:"text-purple-800",children:S.guardian_address})]})]})]}),(S.emergency_contact_name||S.emergency_contact_phone)&&(0,a.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[(0,a.jsxs)("h4",{className:"font-medium text-red-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),"Emergency Contact Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.emergency_contact_name&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-red-700 font-medium",children:"Name:"}),(0,a.jsx)("p",{className:"text-red-800",children:S.emergency_contact_name})]}),S.emergency_contact_relationship&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-red-700 font-medium",children:"Relationship:"}),(0,a.jsx)("p",{className:"text-red-800 capitalize",children:S.emergency_contact_relationship})]}),S.emergency_contact_phone&&(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("span",{className:"text-sm text-red-700 font-medium",children:"Phone:"}),(0,a.jsx)("p",{className:"text-red-800",children:S.emergency_contact_phone})]})]})]}),(S.insurance_provider||S.insurance_number)&&(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,a.jsxs)("h4",{className:"font-medium text-blue-900 mb-3 flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),"Insurance Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.insurance_provider&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Provider:"}),(0,a.jsx)("p",{className:"text-blue-800",children:S.insurance_provider})]}),S.insurance_number&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm text-blue-700 font-medium",children:"Policy Number:"}),(0,a.jsx)("p",{className:"text-blue-800",children:S.insurance_number})]})]})]})]}),"appointments"===B&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Appointment History"}),(0,a.jsxs)("button",{className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"h-4 w-4"}),"New Appointment"]})]}),S.appointments&&S.appointments.length>0?(0,a.jsx)("div",{className:"space-y-3",children:S.appointments.map((e,t)=>(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.type}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[en(e.appointment_date)," at ",e.appointment_time]}),e.doctor&&(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Dr. ",e.doctor.user?.name||"Unknown"," - ",e.doctor.user?.specialization||"General"]}),e.symptoms&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Symptoms: ",e.symptoms]})]}),(0,a.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"completed"===e.status?"bg-green-100 text-green-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:e.status})]})},t))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No appointments found"})]})]}),"billing"===B&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Billing Information"}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(f.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Billing information will be available soon"})]})]})]})]})]}),U&&S&&(0,a.jsx)(O,{patientId:S.patient_id,onClose:()=>{$(!1),Y(null)},onVitalsRecorded:()=>{ei()},editingVital:W,currentUser:Z})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Patient Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"The requested patient could not be found."}),(0,a.jsx)(F(),{href:"/patients",children:(0,a.jsx)("button",{className:"bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Patients"})})]})})}function O({patientId:e,onClose:t,onVitalsRecorded:s,editingVital:i,currentUser:n}){let[l,d]=(0,r.useState)({systolicBp:"",diastolicBp:"",heartRate:"",temperature:"",respiratoryRate:"",oxygenSaturation:"",weight:"",height:"",bloodGlucose:"",painScale:"",notes:""}),[o,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),p=e=>{let{name:t,value:s}=e.target;d(e=>({...e,[t]:s}))},h=async a=>{a.preventDefault(),c(!0),x(null);try{let a={patientId:e,recordedBy:n?.id||null,systolicBp:l.systolicBp?parseInt(l.systolicBp):void 0,diastolicBp:l.diastolicBp?parseInt(l.diastolicBp):void 0,heartRate:l.heartRate?parseInt(l.heartRate):void 0,temperature:l.temperature?parseFloat(l.temperature):void 0,respiratoryRate:l.respiratoryRate?parseInt(l.respiratoryRate):void 0,oxygenSaturation:l.oxygenSaturation?parseInt(l.oxygenSaturation):void 0,weight:l.weight?parseFloat(l.weight):void 0,height:l.height?parseFloat(l.height):void 0,bloodGlucose:l.bloodGlucose?parseInt(l.bloodGlucose):void 0,painScale:l.painScale?parseInt(l.painScale):void 0,notes:l.notes||void 0};i?await R(i.id,a):await M(a),s(),t()}catch(e){console.error("Error recording vitals:",e),x(e instanceof Error?e.message:"Failed to record vitals")}finally{c(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:i?"Edit Vitals":"Record New Vitals"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(S.A,{className:"h-6 w-6"})})]}),m&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:m}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Systolic BP (mmHg)"}),(0,a.jsx)("input",{type:"number",name:"systolicBp",value:l.systolicBp,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diastolic BP (mmHg)"}),(0,a.jsx)("input",{type:"number",name:"diastolicBp",value:l.diastolicBp,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heart Rate (bpm)"}),(0,a.jsx)("input",{type:"number",name:"heartRate",value:l.heartRate,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Temperature (\xb0C)"}),(0,a.jsx)("input",{type:"number",step:"0.1",name:"temperature",value:l.temperature,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Respiratory Rate (bpm)"}),(0,a.jsx)("input",{type:"number",name:"respiratoryRate",value:l.respiratoryRate,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Oxygen Saturation (%)"}),(0,a.jsx)("input",{type:"number",name:"oxygenSaturation",value:l.oxygenSaturation,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg)"}),(0,a.jsx)("input",{type:"number",step:"0.1",name:"weight",value:l.weight,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (cm)"}),(0,a.jsx)("input",{type:"number",step:"0.1",name:"height",value:l.height,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Glucose (mg/dL)"}),(0,a.jsx)("input",{type:"number",name:"bloodGlucose",value:l.bloodGlucose,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pain Scale (0-10)"}),(0,a.jsx)("input",{type:"number",min:"0",max:"10",name:"painScale",value:l.painScale,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,a.jsx)("textarea",{name:"notes",value:l.notes,onChange:p,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Additional notes about the patient's condition..."})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:o,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50",disabled:o,children:o?"Saving...":i?"Update Vitals":"Record Vitals"})]})]})]})})})}},41550:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},43649:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},44414:(e,t,s)=>{Promise.resolve().then(s.bind(s,66430))},48340:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},48730:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58869:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},66430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/nisha/Desktop/hms/untitled folder/project/app/patients/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/nisha/Desktop/hms/untitled folder/project/app/patients/[id]/page.tsx","default")},67760:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},72876:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o});var a=s(65239),r=s(48088),i=s(88170),n=s.n(i),l=s(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["patients",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,66430)),"/Users/nisha/Desktop/hms/untitled folder/project/app/patients/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/Users/nisha/Desktop/hms/untitled folder/project/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/nisha/Desktop/hms/untitled folder/project/app/patients/[id]/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/patients/[id]/page",pathname:"/patients/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},74075:e=>{"use strict";e.exports=require("zlib")},79410:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84582:(e,t,s)=>{Promise.resolve().then(s.bind(s,38391))},91645:e=>{"use strict";e.exports=require("net")},93508:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},93613:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},94735:e=>{"use strict";e.exports=require("events")},96474:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},97992:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},99891:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,462,658,463,308,525],()=>s(72876));module.exports=a})();