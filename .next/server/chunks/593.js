"use strict";exports.id=593,exports.ids=[593],exports.modules={71147:(e,r,o)=>{o.d(r,{Nf:()=>g,PV:()=>y,Qg:()=>i,ar:()=>t,gd:()=>l,kt:()=>d,oR:()=>s});var a=o(16391);async function i(e){try{let{data:r,error:o}=await a.ND.auth.signUp({email:e.email,password:"password",options:{emailRedirectTo:`${window.location.origin}/auth/callback`,data:{role:"doctor",name:e.name,email_confirm:!0}}});if(o)throw console.error("Error creating doctor auth user:",o),Error(`Failed to create doctor authentication: ${o.message}`);let i={auth_id:r.user?.id,employee_id:e.doctorId,name:e.name,email:e.email,phone:e.phone,address:e.address,role:"doctor",status:"active",permissions:{view_patients:!0,create_appointments:!0,update_medical_records:!0,prescribe_medications:!0}},{data:t,error:s}=await a.ND.from("users").insert([i]).select().single();if(s)throw console.error("Error creating user record:",s),Error(`Failed to create user record: ${s.message}`);e.sessions,e.availableSessions,e.workingDays;let n={user_id:t.id,license_number:e.licenseNumber,specialization:e.specialization,qualification:e.qualification,years_of_experience:e.experienceYears,consultation_fee:e.consultationFee,room_number:e.roomNumber,availability_hours:{sessions:e.sessions,availableSessions:e.availableSessions,workingDays:e.workingDays,emergencyAvailable:e.emergencyAvailable,floorNumber:e.floorNumber,workingHoursStart:e.workingHoursStart,workingHoursEnd:e.workingHoursEnd,department:e.department},status:"active"},{data:c,error:l}=await a.ND.from("doctors").insert([n]).select(`
        *,
        user:users(id, name, email, phone, address)
      `).single();if(l)throw console.error("Error creating doctor record:",l),Error(`Failed to create doctor record: ${l.message}`);return c}catch(e){throw console.error("Error creating doctor:",e),e}}async function t(e={}){try{let{page:r=1,limit:o=20,specialization:i,department:t,availabilityStatus:s,searchTerm:c,includeMD:l=!1}=e,d=(r-1)*o,y=a.ND.from("doctors").select(`
        *,
        user:users(id, name, email, phone, address)
      `,{count:"exact"});if(i&&(y=y.eq("specialization",i)),t){let e={Cardiology:"Cardiology",Pediatrics:"Pediatrics",Orthopedics:"Orthopedics",Neurology:"Neurology",Dermatology:"Dermatology","Obstetrics & Gynecology":"Gynecology",Psychiatry:"Psychiatry",Radiology:"Radiology",Anesthesiology:"Anesthesiology",Emergency:"Emergency Medicine","Internal Medicine":"Internal Medicine",Surgery:"Surgery"}[t]||null;e&&(y=y.eq("specialization",e))}s&&(y=y.eq("status","active")),c&&(y=y.or(`
        license_number.ilike.%${c}%,
        specialization.ilike.%${c}%
      `));let{data:g,error:u,count:h}=await y.range(d,d+o-1).order("created_at",{ascending:!1});if(u)throw console.error("Error fetching doctors:",u),Error(`Failed to fetch doctors: ${u.message}`);return{doctors:(g||[])?.map(e=>({...e,doctor_id:e.license_number,department:n(e.specialization),experience_years:e.years_of_experience,working_hours_start:"09:00",working_hours_end:"17:00",working_days:[1,2,3,4,5,6],floor_number:1,availability_status:"available",emergency_available:!1}))||[],total:h||0,page:r,limit:o}}catch(e){throw console.error("Error fetching doctors:",e),e}}async function s(){try{let{data:e,error:r}=await a.ND.from("doctors").select(`
        *,
        user:users(
          id,
          name,
          email,
          phone,
          address
        )
      `).eq("status","active").order("created_at",{ascending:!1});if(r)throw console.error("Error fetching doctors:",r),Error(`Failed to fetch doctors: ${r.message}`);return(e||[])?.map(e=>({...e,doctor_id:e.license_number,department:n(e.specialization),experience_years:e.years_of_experience,working_hours_start:"09:00",working_hours_end:"17:00",working_days:[1,2,3,4,5,6],floor_number:1,availability_status:"available",emergency_available:!1}))||[]}catch(e){throw console.error("Error fetching doctors:",e),e}}function n(e){return({Cardiology:"Cardiology",Pediatrics:"Pediatrics",Orthopedics:"Orthopedics",Neurology:"Neurology",Dermatology:"Dermatology",Gynecology:"Obstetrics & Gynecology",Psychiatry:"Psychiatry",Radiology:"Radiology",Anesthesiology:"Anesthesiology","Emergency Medicine":"Emergency","Internal Medicine":"Internal Medicine",Surgery:"Surgery",Oncology:"Oncology",Ophthalmology:"Ophthalmology",ENT:"ENT (Ear, Nose & Throat)",Urology:"Urology",Gastroenterology:"Gastroenterology",Endocrinology:"Endocrinology",Nephrology:"Nephrology",Pulmonology:"Pulmonology",Rheumatology:"Rheumatology",Hematology:"Hematology","Infectious Disease":"Infectious Disease",Pathology:"Pathology","Physical Medicine":"Physical Medicine & Rehabilitation","Plastic Surgery":"Plastic Surgery","Vascular Surgery":"Vascular Surgery","Thoracic Surgery":"Thoracic Surgery",Neurosurgery:"Neurosurgery",Dental:"Dental",Physiotherapy:"Physiotherapy",Nutrition:"Nutrition & Dietetics",Other:"Other"})[e]||e}async function c(e){try{let{data:r,error:o}=await supabase.from("doctors").select(`
        *,
        user:users(id, name, email, phone, address)
      `).eq("license_number",e).single();if(o)throw console.error("Error fetching doctor:",o),Error(`Doctor not found: ${o.message}`);return{...r,doctor_id:r.license_number,department:n(r.specialization),experience_years:r.years_of_experience,working_hours_start:"09:00",working_hours_end:"17:00",working_days:[1,2,3,4,5,6],floor_number:1,availability_status:"available",emergency_available:!1}}catch(e){throw console.error("Error fetching doctor:",e),e}}async function l(e,r){try{let{data:o,error:i}=await a.ND.from("doctors").update({status:"available"===r?"active":"inactive"}).eq("id",e).select(`
        *,
        user:users(id, name, email, phone, address)
      `).single();if(i)throw console.error("Error updating doctor availability:",i),Error(`Failed to update doctor availability: ${i.message}`);return{...o,doctor_id:o.license_number,department:n(o.specialization),experience_years:o.years_of_experience,working_hours_start:"09:00",working_hours_end:"17:00",working_days:[1,2,3,4,5,6],floor_number:1,availability_status:r,emergency_available:!1}}catch(e){throw console.error("Error updating doctor availability:",e),e}}async function d(){try{let{data:e,error:r}=await a.ND.from("doctors").select("specialization").eq("status","active");if(r)throw console.error("Error fetching specializations:",r),Error(`Failed to fetch specializations: ${r.message}`);return[...new Set(e?.map(e=>e.specialization)||[])].sort()}catch(e){throw console.error("Error fetching specializations:",e),e}}async function y(){try{let{data:e,error:r}=await a.ND.from("doctors").select("specialization").eq("status","active");if(r)throw console.error("Error fetching doctors:",r),Error(`Failed to fetch departments: ${r.message}`);let o={Cardiology:"Cardiology",Pediatrics:"Pediatrics",Orthopedics:"Orthopedics",Neurology:"Neurology",Dermatology:"Dermatology",Gynecology:"Obstetrics & Gynecology",Psychiatry:"Psychiatry",Radiology:"Radiology",Anesthesiology:"Anesthesiology","Emergency Medicine":"Emergency","Internal Medicine":"Internal Medicine",Surgery:"Surgery",Oncology:"Oncology",Ophthalmology:"Ophthalmology",ENT:"ENT (Ear, Nose & Throat)",Urology:"Urology",Gastroenterology:"Gastroenterology",Endocrinology:"Endocrinology",Nephrology:"Nephrology",Pulmonology:"Pulmonology",Rheumatology:"Rheumatology",Hematology:"Hematology","Infectious Disease":"Infectious Disease",Pathology:"Pathology","Physical Medicine":"Physical Medicine & Rehabilitation","Plastic Surgery":"Plastic Surgery","Vascular Surgery":"Vascular Surgery","Thoracic Surgery":"Thoracic Surgery",Neurosurgery:"Neurosurgery",Dental:"Dental",Physiotherapy:"Physiotherapy",Nutrition:"Nutrition & Dietetics",Other:"Other"},i=e?.map(e=>o[e.specialization]||e.specialization)||[];return[...new Set(i)].sort()}catch(e){throw console.error("Error fetching departments:",e),e}}async function g(e,r){try{let{data:o,error:i}=await a.ND.from("doctors").select("user_id").eq("id",e).single();if(i)throw console.error("Error fetching doctor:",i),Error(`Failed to fetch doctor: ${i.message}`);let t={...r.name&&{name:r.name},...r.email&&{email:r.email},...r.phone&&{phone:r.phone},...r.address&&{address:r.address}},s={...r.licenseNumber&&{license_number:r.licenseNumber},...r.specialization&&{specialization:r.specialization},...r.qualification&&{qualification:r.qualification},...r.experienceYears&&{years_of_experience:r.experienceYears},...r.consultationFee&&{consultation_fee:r.consultationFee},...r.roomNumber&&{room_number:r.roomNumber},...(r.sessions||r.availableSessions||r.workingDays||void 0!==r.emergencyAvailable)&&{availability_hours:{sessions:r.sessions,availableSessions:r.availableSessions,workingDays:r.workingDays,emergencyAvailable:r.emergencyAvailable,...r.floorNumber&&{floorNumber:r.floorNumber},...r.workingHoursStart&&{workingHoursStart:r.workingHoursStart},...r.workingHoursEnd&&{workingHoursEnd:r.workingHoursEnd}}}};if(Object.keys(t).length>0){let{error:e}=await a.ND.from("users").update(t).eq("id",o.user_id);if(e)throw console.error("Error updating user:",e),Error(`Failed to update user: ${e.message}`)}if(Object.keys(s).length>0){let{error:r}=await a.ND.from("doctors").update(s).eq("id",e);if(r)throw console.error("Error updating doctor:",r),Error(`Failed to update doctor: ${r.message}`)}let{data:n,error:c}=await a.ND.from("doctors").select("*").eq("id",e).single();if(c)throw console.error("Error fetching updated doctor:",c),Error(`Failed to fetch updated doctor: ${c.message}`);let{data:l,error:d}=await a.ND.from("users").select("id, name, email, phone, address").eq("id",n.user_id).single();return d&&console.error("Error fetching user data:",d),{...n,user:l||void 0}}catch(e){throw console.error("Error updating doctor:",e),e}}},81904:(e,r,o)=>{o.d(r,{A:()=>a});let a=(0,o(62688).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},97992:(e,r,o)=>{o.d(r,{A:()=>a});let a=(0,o(62688).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])}};