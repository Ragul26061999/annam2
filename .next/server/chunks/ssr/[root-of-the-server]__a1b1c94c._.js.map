{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = 'https://zusheijhebsmjiyyeiqq.supabase.co';\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp1c2hlaWpoZWJzbWppeXllaXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MjI0NDAsImV4cCI6MjA2NzM5ODQ0MH0.iwGPaOJPa6OvwX_iA1xvRt5cM72DWfd8Br1pwRTemRc';\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\nexport const signInWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n  return { data, error };\n};\n\nexport const signUpWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n    },\n  });\n  return { data, error };\n};\n\n// Function to create admin user without email confirmation\nexport const createAdminUser = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n      data: {\n        email_confirm: true,\n      },\n    },\n  });\n  return { data, error };\n};\n\nexport const signOut = async () => {\n  await supabase.auth.signOut();\n};\n\nexport const getCurrentUser = async () => {\n  const { data: { user } } = await supabase.auth.getUser();\n  return user;\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAE3C,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;QAC5D;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAGO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;YAC1D,MAAM;gBACJ,eAAe;YACjB;QACF;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,UAAU;IACrB,MAAM,SAAS,IAAI,CAAC,OAAO;AAC7B;AAEO,MAAM,iBAAiB;IAC5B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/appointmentService.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { Doctor } from './doctorService';\n\n// Validation and business rule interfaces\nexport interface ValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\nexport interface BusinessRules {\n  maxAppointmentsPerDay: number;\n  minAdvanceBookingHours: number;\n  maxAdvanceBookingDays: number;\n  allowWeekendBooking: boolean;\n  emergencySlotBuffer: number; // minutes\n  followUpGracePeriod: number; // days\n}\n\n// Default business rules\nconst DEFAULT_BUSINESS_RULES: BusinessRules = {\n  maxAppointmentsPerDay: 20,\n  minAdvanceBookingHours: 2,\n  maxAdvanceBookingDays: 90,\n  allowWeekendBooking: false,\n  emergencySlotBuffer: 15,\n  followUpGracePeriod: 7\n};\n\n/**\n * Validate appointment data before creation\n */\nexport async function validateAppointmentData(\n  appointmentData: AppointmentData,\n  businessRules: BusinessRules = DEFAULT_BUSINESS_RULES\n): Promise<ValidationResult> {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  // Basic field validation\n  if (!appointmentData.patientId) {\n    errors.push('Patient ID is required');\n  }\n  if (!appointmentData.doctorId) {\n    errors.push('Doctor ID is required');\n  }\n  if (!appointmentData.appointmentDate) {\n    errors.push('Appointment date is required');\n  }\n  if (!appointmentData.appointmentTime) {\n    errors.push('Appointment time is required');\n  }\n\n  // Date and time validation\n  const appointmentDateTime = new Date(`${appointmentData.appointmentDate}T${appointmentData.appointmentTime}`);\n  const now = new Date();\n  const dayOfWeek = appointmentDateTime.getDay();\n\n  // Check if appointment is in the past\n  if (appointmentDateTime <= now) {\n    errors.push('Appointment cannot be scheduled in the past');\n  }\n\n  // Check minimum advance booking time\n  const hoursUntilAppointment = (appointmentDateTime.getTime() - now.getTime()) / (1000 * 60 * 60);\n  if (hoursUntilAppointment < businessRules.minAdvanceBookingHours) {\n    errors.push(`Appointments must be booked at least ${businessRules.minAdvanceBookingHours} hours in advance`);\n  }\n\n  // Check maximum advance booking time\n  const daysUntilAppointment = (appointmentDateTime.getTime() - now.getTime()) / (1000 * 60 * 60 * 24);\n  if (daysUntilAppointment > businessRules.maxAdvanceBookingDays) {\n    errors.push(`Appointments cannot be booked more than ${businessRules.maxAdvanceBookingDays} days in advance`);\n  }\n\n  // Check weekend booking policy\n  if (!businessRules.allowWeekendBooking && (dayOfWeek === 0 || dayOfWeek === 6)) {\n    errors.push('Weekend appointments are not allowed');\n  }\n\n  // Check business hours (9 AM to 6 PM)\n  const appointmentHour = appointmentDateTime.getHours();\n  if (appointmentHour < 9 || appointmentHour >= 18) {\n    errors.push('Appointments must be scheduled between 9:00 AM and 6:00 PM');\n  }\n\n  // Validate appointment duration\n  if (appointmentData.durationMinutes && (appointmentData.durationMinutes < 15 || appointmentData.durationMinutes > 120)) {\n    errors.push('Appointment duration must be between 15 and 120 minutes');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n    warnings\n  };\n}\n\n/**\n * Check for appointment conflicts\n */\nexport async function checkAppointmentConflicts(\n  appointmentData: AppointmentData,\n  excludeAppointmentId?: string\n): Promise<ValidationResult> {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  try {\n    const appointmentDateTime = new Date(`${appointmentData.appointmentDate}T${appointmentData.appointmentTime}`);\n    const duration = appointmentData.durationMinutes || 30;\n    const endTime = new Date(appointmentDateTime.getTime() + duration * 60000);\n\n    // Check for doctor conflicts\n    let doctorQuery = supabase\n      .from('appointments')\n      .select('id, appointment_time, duration_minutes')\n      .eq('doctor_id', appointmentData.doctorId)\n      .eq('appointment_date', appointmentData.appointmentDate)\n      .in('status', ['scheduled', 'confirmed', 'in_progress']);\n\n    if (excludeAppointmentId) {\n      doctorQuery = doctorQuery.neq('id', excludeAppointmentId);\n    }\n\n    const { data: doctorAppointments, error: doctorError } = await doctorQuery;\n\n    if (doctorError) {\n      errors.push('Failed to check doctor availability');\n      return { isValid: false, errors, warnings };\n    }\n\n    // Check for time conflicts with doctor's existing appointments\n    for (const existingAppointment of doctorAppointments || []) {\n      const existingStart = new Date(`${appointmentData.appointmentDate}T${existingAppointment.appointment_time}`);\n      const existingEnd = new Date(existingStart.getTime() + (existingAppointment.duration_minutes || 30) * 60000);\n\n      // Check if appointments overlap\n      if (\n        (appointmentDateTime >= existingStart && appointmentDateTime < existingEnd) ||\n        (endTime > existingStart && endTime <= existingEnd) ||\n        (appointmentDateTime <= existingStart && endTime >= existingEnd)\n      ) {\n        errors.push(`Doctor has a conflicting appointment at ${existingAppointment.appointment_time}`);\n      }\n    }\n\n    // Check patient conflicts (prevent double booking)\n    let patientQuery = supabase\n      .from('appointments')\n      .select('id, appointment_time, duration_minutes')\n      .eq('patient_id', appointmentData.patientId)\n      .eq('appointment_date', appointmentData.appointmentDate)\n      .in('status', ['scheduled', 'confirmed', 'in_progress']);\n\n    if (excludeAppointmentId) {\n      patientQuery = patientQuery.neq('id', excludeAppointmentId);\n    }\n\n    const { data: patientAppointments, error: patientError } = await patientQuery;\n\n    if (patientError) {\n      errors.push('Failed to check patient availability');\n      return { isValid: false, errors, warnings };\n    }\n\n    // Check for patient conflicts\n    for (const existingAppointment of patientAppointments || []) {\n      const existingStart = new Date(`${appointmentData.appointmentDate}T${existingAppointment.appointment_time}`);\n      const existingEnd = new Date(existingStart.getTime() + (existingAppointment.duration_minutes || 30) * 60000);\n\n      if (\n        (appointmentDateTime >= existingStart && appointmentDateTime < existingEnd) ||\n        (endTime > existingStart && endTime <= existingEnd) ||\n        (appointmentDateTime <= existingStart && endTime >= existingEnd)\n      ) {\n        errors.push(`Patient has a conflicting appointment at ${existingAppointment.appointment_time}`);\n      }\n    }\n\n    // Check doctor's daily appointment limit\n    const { count: dailyCount, error: countError } = await supabase\n      .from('appointments')\n      .select('id', { count: 'exact', head: true })\n      .eq('doctor_id', appointmentData.doctorId)\n      .eq('appointment_date', appointmentData.appointmentDate)\n      .in('status', ['scheduled', 'confirmed', 'in_progress']);\n\n    if (countError) {\n      warnings.push('Could not verify daily appointment limit');\n    } else if ((dailyCount || 0) >= DEFAULT_BUSINESS_RULES.maxAppointmentsPerDay) {\n      errors.push(`Doctor has reached the maximum daily appointment limit (${DEFAULT_BUSINESS_RULES.maxAppointmentsPerDay})`);\n    }\n\n  } catch (error) {\n    console.error('Error checking appointment conflicts:', error);\n    errors.push('Failed to validate appointment conflicts');\n  }\n\n  return {\n    isValid: errors.length === 0,\n    errors,\n    warnings\n  };\n}\n\n/**\n * Comprehensive appointment validation\n */\nexport async function validateAppointment(\n  appointmentData: AppointmentData,\n  excludeAppointmentId?: string,\n  businessRules: BusinessRules = DEFAULT_BUSINESS_RULES\n): Promise<ValidationResult> {\n  // Run basic validation\n  const basicValidation = await validateAppointmentData(appointmentData, businessRules);\n  \n  if (!basicValidation.isValid) {\n    return basicValidation;\n  }\n\n  // Run conflict validation\n  const conflictValidation = await checkAppointmentConflicts(appointmentData, excludeAppointmentId);\n  \n  return {\n    isValid: basicValidation.isValid && conflictValidation.isValid,\n    errors: [...basicValidation.errors, ...conflictValidation.errors],\n    warnings: [...basicValidation.warnings, ...conflictValidation.warnings]\n  };\n}\n\n/**\n * Smart slot recommendation when conflicts occur\n */\nexport async function getAlternativeSlots(\n  appointmentData: AppointmentData,\n  maxSuggestions: number = 5\n): Promise<AppointmentSlot[]> {\n  const suggestions: AppointmentSlot[] = [];\n  const requestedDate = new Date(appointmentData.appointmentDate);\n  const duration = appointmentData.durationMinutes || 30;\n  \n  try {\n    // Get doctor information\n    const { data: doctor, error: doctorError } = await supabase\n      .from('doctors')\n      .select('*')\n      .eq('id', appointmentData.doctorId)\n      .single();\n\n    if (doctorError || !doctor) {\n      return suggestions;\n    }\n\n    // Check slots for the next 7 days\n    for (let dayOffset = 0; dayOffset < 7 && suggestions.length < maxSuggestions; dayOffset++) {\n      const checkDate = new Date(requestedDate);\n      checkDate.setDate(requestedDate.getDate() + dayOffset);\n      const dateStr = checkDate.toISOString().split('T')[0];\n      \n      // Skip weekends if not allowed\n      const dayOfWeek = checkDate.getDay();\n      if (!DEFAULT_BUSINESS_RULES.allowWeekendBooking && (dayOfWeek === 0 || dayOfWeek === 6)) {\n        continue;\n      }\n\n      // Get existing appointments for this date\n      const { data: existingAppointments } = await supabase\n        .from('appointments')\n        .select('appointment_time, duration_minutes')\n        .eq('doctor_id', appointmentData.doctorId)\n        .eq('appointment_date', dateStr)\n        .in('status', ['scheduled', 'confirmed', 'in_progress']);\n\n      // Generate time slots (9 AM to 6 PM, 30-minute intervals)\n      for (let hour = 9; hour < 18 && suggestions.length < maxSuggestions; hour++) {\n        for (let minute = 0; minute < 60; minute += 30) {\n          const timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n          const slotStart = new Date(`${dateStr}T${timeStr}`);\n          const slotEnd = new Date(slotStart.getTime() + duration * 60000);\n\n          // Check if this slot conflicts with existing appointments\n          let hasConflict = false;\n          for (const existing of existingAppointments || []) {\n            const existingStart = new Date(`${dateStr}T${existing.appointment_time}`);\n            const existingEnd = new Date(existingStart.getTime() + (existing.duration_minutes || 30) * 60000);\n\n            if (\n              (slotStart >= existingStart && slotStart < existingEnd) ||\n              (slotEnd > existingStart && slotEnd <= existingEnd) ||\n              (slotStart <= existingStart && slotEnd >= existingEnd)\n            ) {\n              hasConflict = true;\n              break;\n            }\n          }\n\n          if (!hasConflict) {\n            // Validate this alternative slot\n            const altData = {\n              ...appointmentData,\n              appointmentDate: dateStr,\n              appointmentTime: timeStr\n            };\n            \n            const validation = await validateAppointmentData(altData);\n            if (validation.isValid) {\n              suggestions.push({\n                date: dateStr,\n                time: timeStr,\n                available: true,\n                doctorId: appointmentData.doctorId,\n                doctorName: doctor.user?.name || 'Unknown',\n                specialization: doctor.specialization || 'General'\n              });\n            }\n          }\n        }\n      }\n    }\n\n    return suggestions;\n  } catch (error) {\n    console.error('Error getting alternative slots:', error);\n    return suggestions;\n  }\n}\n\n/**\n * Enhanced validation with smart suggestions\n */\nexport async function validateAppointmentWithSuggestions(\n  appointmentData: AppointmentData,\n  excludeAppointmentId?: string,\n  businessRules: BusinessRules = DEFAULT_BUSINESS_RULES\n): Promise<ValidationResult & { suggestions?: AppointmentSlot[] }> {\n  const validation = await validateAppointment(appointmentData, excludeAppointmentId, businessRules);\n  \n  // If validation fails due to conflicts, provide alternative suggestions\n  if (!validation.isValid && validation.errors.some(error => \n    error.includes('conflicting appointment') || \n    error.includes('maximum daily appointment limit')\n  )) {\n    const suggestions = await getAlternativeSlots(appointmentData);\n    return {\n      ...validation,\n      suggestions\n    };\n  }\n  \n  return validation;\n}\n\n// Types for appointment management\nexport interface AppointmentData {\n  patientId: string;\n  doctorId: string;\n  appointmentDate: string;\n  appointmentTime: string;\n  durationMinutes?: number;\n  type: 'new_patient' | 'follow_up' | 'emergency' | 'routine_checkup' | 'consultation';\n  symptoms?: string;\n  chiefComplaint?: string;\n  notes?: string;\n}\n\nexport interface Appointment {\n  id: string;\n  appointment_id: string;\n  patient_id: string;\n  doctor_id: string;\n  appointment_date: string;\n  appointment_time: string;\n  duration_minutes: number;\n  type: string;\n  status: 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'rescheduled';\n  symptoms?: string;\n  chief_complaint?: string;\n  diagnosis?: string;\n  treatment_plan?: string;\n  prescriptions?: any[];\n  next_appointment_date?: string;\n  follow_up_instructions?: string;\n  notes?: string;\n  created_by?: string;\n  created_at: string;\n  updated_at: string;\n  \n  // Related data\n  patient?: any;\n  doctor?: any;\n}\n\nexport interface AppointmentSlot {\n  date: string;\n  time: string;\n  available: boolean;\n  doctorId: string;\n  doctorName: string;\n  specialization: string;\n}\n\n/**\n * Generate a unique appointment ID\n * Format: APT{Year}{Month}{Day}{Sequential}\n * Example: APT202501150001\n */\nexport async function generateAppointmentId(): Promise<string> {\n  const now = new Date();\n  const year = now.getFullYear().toString();\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  const day = now.getDate().toString().padStart(2, '0');\n  const datePrefix = `${year}${month}${day}`;\n  \n  try {\n    // Get count of existing appointments for today\n    const { count, error } = await supabase\n      .from('appointments')\n      .select('id', { count: 'exact', head: true })\n      .like('appointment_id', `APT${datePrefix}%`);\n    \n    if (error) {\n      console.error('Error getting appointment count:', error);\n      throw new Error('Failed to generate appointment ID');\n    }\n    \n    const sequence = ((count || 0) + 1).toString().padStart(4, '0');\n    return `APT${datePrefix}${sequence}`;\n  } catch (error) {\n    console.error('Error generating appointment ID:', error);\n    throw error;\n  }\n}\n\n/**\n * Create a new appointment\n */\nexport async function createAppointment(\n  appointmentData: AppointmentData,\n  createdBy?: string\n): Promise<Appointment> {\n  try {\n    // Validate appointment data and check for conflicts\n    const validation = await validateAppointment(appointmentData);\n    \n    if (!validation.isValid) {\n      const errorMessage = validation.errors.join('; ');\n      throw new Error(`Appointment validation failed: ${errorMessage}`);\n    }\n    \n    // Log warnings if any\n    if (validation.warnings.length > 0) {\n      console.warn('Appointment warnings:', validation.warnings.join('; '));\n    }\n    \n    const appointmentId = await generateAppointmentId();\n    \n    const appointmentRecord = {\n      appointment_id: appointmentId,\n      patient_id: appointmentData.patientId,\n      doctor_id: appointmentData.doctorId,\n      appointment_date: appointmentData.appointmentDate,\n      appointment_time: appointmentData.appointmentTime,\n      duration_minutes: appointmentData.durationMinutes || 30,\n      type: appointmentData.type,\n      status: 'scheduled',\n      symptoms: appointmentData.symptoms || null,\n      chief_complaint: appointmentData.chiefComplaint || null,\n      notes: appointmentData.notes || null,\n      created_by: createdBy || null,\n      prescriptions: []\n    };\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .insert([appointmentRecord])\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error creating appointment:', error);\n      throw new Error(`Failed to create appointment: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error creating appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Get appointments with filtering and pagination\n */\nexport async function getAppointments(options: {\n  page?: number;\n  limit?: number;\n  patientId?: string;\n  doctorId?: string;\n  date?: string;\n  status?: string;\n  type?: string;\n  searchTerm?: string;\n} = {}): Promise<{\n  appointments: Appointment[];\n  total: number;\n  page: number;\n  limit: number;\n}> {\n  try {\n    const { page = 1, limit = 20, patientId, doctorId, date, status, type, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (patientId) {\n      query = query.eq('patient_id', patientId);\n    }\n\n    if (doctorId) {\n      query = query.eq('doctor_id', doctorId);\n    }\n\n    if (date) {\n      query = query.eq('appointment_date', date);\n    }\n\n    if (status) {\n      query = query.eq('status', status);\n    }\n\n    if (type) {\n      query = query.eq('type', type);\n    }\n\n    if (searchTerm) {\n      query = query.or(`\n        appointment_id.ilike.%${searchTerm}%,\n        symptoms.ilike.%${searchTerm}%,\n        chief_complaint.ilike.%${searchTerm}%,\n        diagnosis.ilike.%${searchTerm}%\n      `);\n    }\n\n    // Apply pagination and ordering\n    const { data: appointments, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('appointment_date', { ascending: false })\n      .order('appointment_time', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching appointments:', error);\n      throw new Error(`Failed to fetch appointments: ${error.message}`);\n    }\n\n    return {\n      appointments: appointments || [],\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching appointments:', error);\n    throw error;\n  }\n}\n\n/**\n * Get appointment by ID\n */\nexport async function getAppointmentById(appointmentId: string): Promise<Appointment> {\n  try {\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email, date_of_birth, gender, address),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          qualification,\n          user:users(name, phone, email)\n        )\n      `)\n      .eq('appointment_id', appointmentId)\n      .single();\n\n    if (error) {\n      console.error('Error fetching appointment:', error);\n      throw new Error(`Appointment not found: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error fetching appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Update appointment status\n */\nexport async function updateAppointmentStatus(\n  appointmentId: string,\n  status: 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'rescheduled'\n): Promise<Appointment> {\n  try {\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update({ status })\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating appointment status:', error);\n      throw new Error(`Failed to update appointment status: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error updating appointment status:', error);\n    throw error;\n  }\n}\n\n/**\n * Update appointment with medical information\n */\nexport async function updateAppointmentMedicalInfo(\n  appointmentId: string,\n  medicalInfo: {\n    diagnosis?: string;\n    treatmentPlan?: string;\n    prescriptions?: any[];\n    followUpInstructions?: string;\n    nextAppointmentDate?: string;\n  }\n): Promise<Appointment> {\n  try {\n    const updateData: any = {};\n    \n    if (medicalInfo.diagnosis) updateData.diagnosis = medicalInfo.diagnosis;\n    if (medicalInfo.treatmentPlan) updateData.treatment_plan = medicalInfo.treatmentPlan;\n    if (medicalInfo.prescriptions) updateData.prescriptions = medicalInfo.prescriptions;\n    if (medicalInfo.followUpInstructions) updateData.follow_up_instructions = medicalInfo.followUpInstructions;\n    if (medicalInfo.nextAppointmentDate) updateData.next_appointment_date = medicalInfo.nextAppointmentDate;\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update(updateData)\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating appointment medical info:', error);\n      throw new Error(`Failed to update appointment medical info: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error updating appointment medical info:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient appointment history\n */\nexport async function getPatientAppointmentHistory(\n  patientId: string,\n  limit: number = 10\n): Promise<Appointment[]> {\n  try {\n    const { data: appointments, error } = await supabase\n      .from('appointments')\n      .select(`\n        *,\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .eq('patient_id', patientId)\n      .order('appointment_date', { ascending: false })\n      .order('appointment_time', { ascending: false })\n      .limit(limit);\n\n    if (error) {\n      console.error('Error fetching patient appointment history:', error);\n      throw new Error(`Failed to fetch appointment history: ${error.message}`);\n    }\n\n    return appointments || [];\n  } catch (error) {\n    console.error('Error fetching patient appointment history:', error);\n    throw error;\n  }\n}\n\n/**\n * Get doctor appointment schedule\n */\nexport async function getDoctorAppointmentSchedule(\n  doctorId: string,\n  date: string\n): Promise<Appointment[]> {\n  try {\n    const { data: appointments, error } = await supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email)\n      `)\n      .eq('doctor_id', doctorId)\n      .eq('appointment_date', date)\n      .in('status', ['scheduled', 'confirmed', 'in_progress'])\n      .order('appointment_time', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching doctor schedule:', error);\n      throw new Error(`Failed to fetch doctor schedule: ${error.message}`);\n    }\n\n    return appointments || [];\n  } catch (error) {\n    console.error('Error fetching doctor schedule:', error);\n    throw error;\n  }\n}\n\n/**\n * Get available appointment slots for a doctor\n */\nexport async function getAvailableSlots(\n  doctorId: string,\n  date: string\n): Promise<AppointmentSlot[]> {\n  try {\n    // Get doctor information\n    const { data: doctor, error: doctorError } = await supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(name)\n      `)\n      .eq('doctor_id', doctorId)\n      .single();\n\n    if (doctorError) {\n      console.error('Error fetching doctor:', doctorError);\n      throw new Error(`Doctor not found: ${doctorError.message}`);\n    }\n\n    // Get existing appointments for the date\n    const { data: existingAppointments, error: appointmentsError } = await supabase\n      .from('appointments')\n      .select('appointment_time, duration_minutes')\n      .eq('doctor_id', doctorId)\n      .eq('appointment_date', date)\n      .in('status', ['scheduled', 'confirmed', 'in_progress']);\n\n    if (appointmentsError) {\n      console.error('Error fetching existing appointments:', appointmentsError);\n      throw new Error(`Failed to fetch existing appointments: ${appointmentsError.message}`);\n    }\n\n    // Generate time slots based on doctor's working hours\n    const slots: AppointmentSlot[] = [];\n    const workingStartHour = parseInt(doctor.working_hours_start.split(':')[0]);\n    const workingEndHour = parseInt(doctor.working_hours_end.split(':')[0]);\n    const slotDuration = 30; // 30 minutes per slot\n\n    for (let hour = workingStartHour; hour < workingEndHour; hour++) {\n      for (let minute = 0; minute < 60; minute += slotDuration) {\n        const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n        \n        // Check if slot is available\n        const isBooked = existingAppointments?.some(apt => {\n          const aptTime = apt.appointment_time;\n          const aptDuration = apt.duration_minutes || 30;\n          const aptEndTime = new Date(`2000-01-01T${aptTime}`);\n          aptEndTime.setMinutes(aptEndTime.getMinutes() + aptDuration);\n          \n          const slotTime = new Date(`2000-01-01T${timeString}`);\n          const slotEndTime = new Date(slotTime);\n          slotEndTime.setMinutes(slotEndTime.getMinutes() + slotDuration);\n          \n          return (slotTime < aptEndTime && slotEndTime > new Date(`2000-01-01T${aptTime}`));\n        });\n\n        slots.push({\n          date,\n          time: timeString,\n          available: !isBooked,\n          doctorId,\n          doctorName: doctor.user?.name || 'Unknown',\n          specialization: doctor.specialization\n        });\n      }\n    }\n\n    return slots;\n  } catch (error) {\n    console.error('Error generating available slots:', error);\n    throw error;\n  }\n}\n\n/**\n * Reschedule appointment\n */\nexport async function rescheduleAppointment(\n  appointmentId: string,\n  newDate: string,\n  newTime: string\n): Promise<Appointment> {\n  try {\n    // First, get the current appointment\n    const currentAppointment = await getAppointmentById(appointmentId);\n    \n    if (!currentAppointment) {\n      throw new Error('Appointment not found');\n    }\n\n    // Create appointment data for validation\n    const rescheduleData: AppointmentData = {\n      patientId: currentAppointment.patient_id,\n      doctorId: currentAppointment.doctor_id,\n      appointmentDate: newDate,\n      appointmentTime: newTime,\n      durationMinutes: currentAppointment.duration_minutes,\n      type: currentAppointment.type as any,\n      symptoms: currentAppointment.symptoms,\n      chiefComplaint: currentAppointment.chief_complaint,\n      notes: currentAppointment.notes\n    };\n\n    // Validate the new appointment time (exclude current appointment from conflict check)\n    const validation = await validateAppointment(rescheduleData, currentAppointment.id);\n    \n    if (!validation.isValid) {\n      const errorMessage = validation.errors.join('; ');\n      throw new Error(`Reschedule validation failed: ${errorMessage}`);\n    }\n    \n    // Log warnings if any\n    if (validation.warnings.length > 0) {\n      console.warn('Reschedule warnings:', validation.warnings.join('; '));\n    }\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update({\n        appointment_date: newDate,\n        appointment_time: newTime,\n        status: 'rescheduled'\n      })\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error rescheduling appointment:', error);\n      throw new Error(`Failed to reschedule appointment: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error rescheduling appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Cancel appointment\n */\nexport async function cancelAppointment(\n  appointmentId: string,\n  reason?: string\n): Promise<Appointment> {\n  try {\n    const updateData: any = { status: 'cancelled' };\n    if (reason) {\n      updateData.notes = reason;\n    }\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update(updateData)\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error cancelling appointment:', error);\n      throw new Error(`Failed to cancel appointment: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error cancelling appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Get appointment statistics\n */\nexport async function getAppointmentStats(\n  doctorId?: string,\n  patientId?: string,\n  dateRange?: { start: string; end: string }\n): Promise<{\n  total: number;\n  scheduled: number;\n  completed: number;\n  cancelled: number;\n  todayCount: number;\n  upcomingCount: number;\n}> {\n  try {\n    let query = supabase\n      .from('appointments')\n      .select('id, status, appointment_date');\n\n    if (doctorId) {\n      query = query.eq('doctor_id', doctorId);\n    }\n\n    if (patientId) {\n      query = query.eq('patient_id', patientId);\n    }\n\n    if (dateRange) {\n      query = query.gte('appointment_date', dateRange.start)\n                   .lte('appointment_date', dateRange.end);\n    }\n\n    const { data: appointments, error } = await query;\n\n    if (error) {\n      console.error('Error fetching appointment stats:', error);\n      throw new Error(`Failed to fetch appointment stats: ${error.message}`);\n    }\n\n    const today = new Date().toISOString().split('T')[0];\n    const total = appointments?.length || 0;\n    const scheduled = appointments?.filter(apt => apt.status === 'scheduled').length || 0;\n    const completed = appointments?.filter(apt => apt.status === 'completed').length || 0;\n    const cancelled = appointments?.filter(apt => apt.status === 'cancelled').length || 0;\n    const todayCount = appointments?.filter(apt => apt.appointment_date === today).length || 0;\n    const upcomingCount = appointments?.filter(apt => \n      new Date(apt.appointment_date) > new Date(today) && \n      ['scheduled', 'confirmed'].includes(apt.status)\n    ).length || 0;\n\n    return {\n      total,\n      scheduled,\n      completed,\n      cancelled,\n      todayCount,\n      upcomingCount\n    };\n  } catch (error) {\n    console.error('Error getting appointment stats:', error);\n    throw error;\n  }\n}\n\n/**\n * Get upcoming appointments\n */\nexport async function getUpcomingAppointments(\n  doctorId?: string,\n  patientId?: string,\n  limit: number = 10\n): Promise<Appointment[]> {\n  try {\n    const today = new Date().toISOString().split('T')[0];\n    \n    let query = supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .gte('appointment_date', today)\n      .in('status', ['scheduled', 'confirmed'])\n      .order('appointment_date', { ascending: true })\n      .order('appointment_time', { ascending: true })\n      .limit(limit);\n\n    if (doctorId) {\n      query = query.eq('doctor_id', doctorId);\n    }\n\n    if (patientId) {\n      query = query.eq('patient_id', patientId);\n    }\n\n    const { data: appointments, error } = await query;\n\n    if (error) {\n      console.error('Error fetching upcoming appointments:', error);\n      throw new Error(`Failed to fetch upcoming appointments: ${error.message}`);\n    }\n\n    return appointments || [];\n  } catch (error) {\n    console.error('Error fetching upcoming appointments:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/doctorService.ts"],"sourcesContent":["import { supabase } from './supabase';\n\n// Types for doctor management\nexport interface SessionTiming {\n  startTime: string;\n  endTime: string;\n  maxPatients: number;\n}\n\nexport interface DoctorRegistrationData {\n  doctorId: string;\n  licenseNumber: string;\n  specialization: string;\n  department: string;\n  qualification: string;\n  experienceYears: number;\n  consultationFee: number;\n  \n  // User information\n  name: string;\n  email: string;\n  phone: string;\n  address: string;\n  \n  // Schedule information (legacy - for compatibility)\n  workingHoursStart: string;\n  workingHoursEnd: string;\n  workingDays: number[];\n  \n  // Session-based availability\n  sessions: {\n    morning: SessionTiming;\n    afternoon: SessionTiming;\n    evening: SessionTiming;\n  };\n  availableSessions: string[]; // ['morning', 'afternoon', 'evening']\n  \n  // Room information\n  roomNumber: string;\n  floorNumber: number;\n  \n  // Status\n  emergencyAvailable: boolean;\n}\n\nexport interface Doctor {\n  id: string;\n  user_id: string;\n  license_number: string;\n  specialization: string;\n  qualification: string;\n  years_of_experience: number;\n  consultation_fee: number;\n  availability_hours: any; // jsonb field\n  room_number: string;\n  max_patients_per_day: number;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  user?: {\n    id: string;\n    name: string;\n    email: string;\n    phone: string;\n    address: string;\n  };\n  // Computed fields for compatibility\n  doctor_id?: string;\n  department?: string;\n  experience_years?: number;\n  working_hours_start?: string;\n  working_hours_end?: string;\n  working_days?: number[];\n  floor_number?: number;\n  availability_status?: string;\n  emergency_available?: boolean;\n}\n\n/**\n * Generate a unique doctor ID\n * Format: DR{Year}{Month}{Sequential}\n * Example: DR2025010001\n */\nexport async function generateDoctorId(): Promise<string> {\n  const now = new Date();\n  const year = now.getFullYear().toString().slice(-2);\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  \n  try {\n    // Get count of existing doctors for this month\n    const { count, error } = await supabase\n      .from('doctors')\n      .select('id', { count: 'exact', head: true })\n      .like('doctor_id', `DR${year}${month}%`);\n    \n    if (error) {\n      console.error('Error getting doctor count:', error);\n      throw new Error('Failed to generate doctor ID');\n    }\n    \n    const sequence = ((count || 0) + 1).toString().padStart(4, '0');\n    return `DR${year}${month}${sequence}`;\n  } catch (error) {\n    console.error('Error generating doctor ID:', error);\n    throw error;\n  }\n}\n\n/**\n * Create a new doctor record\n */\nexport async function createDoctor(doctorData: DoctorRegistrationData): Promise<Doctor> {\n  try {\n    // First, create user account\n    const { data: authUser, error: authError } = await supabase.auth.signUp({\n      email: doctorData.email,\n      password: 'password', // Default password, should be changed on first login\n      options: {\n        emailRedirectTo: `${window.location.origin}/auth/callback`,\n        data: {\n          role: 'doctor',\n          name: doctorData.name,\n          email_confirm: true\n        }\n      }\n    });\n\n    if (authError) {\n      console.error('Error creating doctor auth user:', authError);\n      throw new Error(`Failed to create doctor authentication: ${authError.message}`);\n    }\n\n    // Create user record\n    const userData = {\n      auth_id: authUser.user?.id,\n      employee_id: doctorData.doctorId,\n      name: doctorData.name,\n      email: doctorData.email,\n      phone: doctorData.phone,\n      address: doctorData.address,\n      role: 'doctor',\n      status: 'active',\n      permissions: {\n        view_patients: true,\n        create_appointments: true,\n        update_medical_records: true,\n        prescribe_medications: true\n      }\n    };\n\n    const { data: user, error: userError } = await supabase\n      .from('users')\n      .insert([userData])\n      .select()\n      .single();\n\n    if (userError) {\n      console.error('Error creating user record:', userError);\n      throw new Error(`Failed to create user record: ${userError.message}`);\n    }\n\n    // Prepare session-based availability data\n    const availabilityHours = {\n      sessions: doctorData.sessions,\n      availableSessions: doctorData.availableSessions,\n      workingDays: doctorData.workingDays\n    };\n\n    // Create doctor record\n    const doctorRecord = {\n      user_id: user.id,\n      doctor_id: doctorData.doctorId,\n      license_number: doctorData.licenseNumber,\n      specialization: doctorData.specialization,\n      department: doctorData.department,\n      qualification: doctorData.qualification,\n      experience_years: doctorData.experienceYears,\n      consultation_fee: doctorData.consultationFee,\n      working_hours_start: doctorData.workingHoursStart,\n      working_hours_end: doctorData.workingHoursEnd,\n      working_days: doctorData.workingDays,\n      availability_hours: availabilityHours, // Store session-based data\n      room_number: doctorData.roomNumber,\n      floor_number: doctorData.floorNumber,\n      availability_status: 'available',\n      emergency_available: doctorData.emergencyAvailable,\n      status: 'active'\n    };\n\n    const { data: doctor, error: doctorError } = await supabase\n      .from('doctors')\n      .insert([doctorRecord])\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .single();\n\n    if (doctorError) {\n      console.error('Error creating doctor record:', doctorError);\n      throw new Error(`Failed to create doctor record: ${doctorError.message}`);\n    }\n\n    return doctor;\n  } catch (error) {\n    console.error('Error creating doctor:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all doctors with pagination and filtering\n */\nexport async function getAllDoctors(options: {\n  page?: number;\n  limit?: number;\n  specialization?: string;\n  department?: string;\n  availabilityStatus?: string;\n  searchTerm?: string;\n} = {}): Promise<{ \n  doctors: Doctor[]; \n  total: number; \n  page: number; \n  limit: number; \n}> {\n  try {\n    const { page = 1, limit = 20, specialization, department, availabilityStatus, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (specialization) {\n      query = query.eq('specialization', specialization);\n    }\n\n    if (department) {\n      // Map department to specialization since we don't have department field\n      const departmentToSpecialization = getSpecializationFromDepartment(department);\n      if (departmentToSpecialization) {\n        query = query.eq('specialization', departmentToSpecialization);\n      }\n    }\n\n    if (availabilityStatus) {\n      query = query.eq('status', 'active'); // Use status field instead\n    }\n\n    if (searchTerm) {\n      query = query.or(`\n        license_number.ilike.%${searchTerm}%,\n        specialization.ilike.%${searchTerm}%\n      `);\n    }\n\n    // Apply pagination\n    const { data: doctors, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching doctors:', error);\n      throw new Error(`Failed to fetch doctors: ${error.message}`);\n    }\n\n    // Add computed fields for compatibility\n    const enhancedDoctors = doctors?.map(doctor => ({\n      ...doctor,\n      doctor_id: doctor.license_number, // Use license_number as doctor_id\n      department: getSpecializationDepartment(doctor.specialization),\n      experience_years: doctor.years_of_experience,\n      working_hours_start: '09:00',\n      working_hours_end: '17:00',\n      working_days: [1, 2, 3, 4, 5, 6],\n      floor_number: 1,\n      availability_status: 'available',\n      emergency_available: false\n    })) || [];\n\n    return {\n      doctors: enhancedDoctors,\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching doctors:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all doctors (simple version without pagination)\n */\nexport async function getAllDoctorsSimple(): Promise<Doctor[]> {\n  try {\n    const { data: doctors, error } = await supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(\n          id,\n          name,\n          email,\n          phone,\n          address\n        )\n      `)\n      .eq('status', 'active')\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching doctors:', error);\n      throw new Error(`Failed to fetch doctors: ${error.message}`);\n    }\n\n    // Add computed fields for compatibility\n    const enhancedDoctors = doctors?.map(doctor => ({\n      ...doctor,\n      doctor_id: doctor.license_number, // Use license_number as doctor_id\n      department: getSpecializationDepartment(doctor.specialization),\n      experience_years: doctor.years_of_experience,\n      working_hours_start: '09:00',\n      working_hours_end: '17:00',\n      working_days: [1, 2, 3, 4, 5, 6],\n      floor_number: 1,\n      availability_status: 'available',\n      emergency_available: false\n    })) || [];\n\n    return enhancedDoctors;\n  } catch (error) {\n    console.error('Error fetching doctors:', error);\n    throw error;\n  }\n}\n\n// Helper function to map specialization to department\nfunction getSpecializationDepartment(specialization: string): string {\n  const specializationToDepartment: Record<string, string> = {\n    'Cardiology': 'Cardiology',\n    'Pediatrics': 'Pediatrics',\n    'Orthopedics': 'Orthopedics',\n    'Neurology': 'Neurology',\n    'Dermatology': 'Dermatology',\n    'Gynecology': 'Obstetrics & Gynecology',\n    'Psychiatry': 'Psychiatry',\n    'Radiology': 'Radiology',\n    'Anesthesiology': 'Anesthesiology',\n    'Emergency Medicine': 'Emergency',\n    'Internal Medicine': 'Internal Medicine',\n    'Surgery': 'Surgery',\n    'Oncology': 'Oncology',\n    'Ophthalmology': 'Ophthalmology',\n    'ENT': 'ENT (Ear, Nose & Throat)',\n    'Urology': 'Urology',\n    'Gastroenterology': 'Gastroenterology',\n    'Endocrinology': 'Endocrinology',\n    'Nephrology': 'Nephrology',\n    'Pulmonology': 'Pulmonology',\n    'Rheumatology': 'Rheumatology',\n    'Hematology': 'Hematology',\n    'Infectious Disease': 'Infectious Disease',\n    'Pathology': 'Pathology',\n    'Physical Medicine': 'Physical Medicine & Rehabilitation',\n    'Plastic Surgery': 'Plastic Surgery',\n    'Vascular Surgery': 'Vascular Surgery',\n    'Thoracic Surgery': 'Thoracic Surgery',\n    'Neurosurgery': 'Neurosurgery',\n    'Dental': 'Dental',\n    'Physiotherapy': 'Physiotherapy',\n    'Nutrition': 'Nutrition & Dietetics',\n    'Other': 'Other'\n  };\n  return specializationToDepartment[specialization] || specialization;\n}\n\n// Helper function to map department back to specialization for filtering\nfunction getSpecializationFromDepartment(department: string): string | null {\n  const departmentToSpecialization: Record<string, string> = {\n    'Cardiology': 'Cardiology',\n    'Pediatrics': 'Pediatrics',\n    'Orthopedics': 'Orthopedics',\n    'Neurology': 'Neurology',\n    'Dermatology': 'Dermatology',\n    'Obstetrics & Gynecology': 'Gynecology',\n    'Psychiatry': 'Psychiatry',\n    'Radiology': 'Radiology',\n    'Anesthesiology': 'Anesthesiology',\n    'Emergency': 'Emergency Medicine',\n    'Internal Medicine': 'Internal Medicine',\n    'Surgery': 'Surgery'\n  };\n  return departmentToSpecialization[department] || null;\n}\n\n/**\n * Get doctor by ID\n */\nexport async function getDoctorById(doctorId: string): Promise<Doctor> {\n  try {\n    const { data: doctor, error } = await supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .eq('license_number', doctorId) // Use license_number since doctor_id doesn't exist\n      .single();\n\n    if (error) {\n      console.error('Error fetching doctor:', error);\n      throw new Error(`Doctor not found: ${error.message}`);\n    }\n\n    // Add computed fields for compatibility\n    const enhancedDoctor = {\n      ...doctor,\n      doctor_id: doctor.license_number,\n      department: getSpecializationDepartment(doctor.specialization),\n      experience_years: doctor.years_of_experience,\n      working_hours_start: '09:00',\n      working_hours_end: '17:00',\n      working_days: [1, 2, 3, 4, 5, 6],\n      floor_number: 1,\n      availability_status: 'available',\n      emergency_available: false\n    };\n\n    return enhancedDoctor;\n  } catch (error) {\n    console.error('Error fetching doctor:', error);\n    throw error;\n  }\n}\n\n/**\n * Update doctor availability status\n */\nexport async function updateDoctorAvailability(\n  doctorId: string, \n  availabilityStatus: string\n): Promise<Doctor> {\n  try {\n    // Update status field instead of availability_status\n    const { data: doctor, error } = await supabase\n      .from('doctors')\n      .update({ status: availabilityStatus === 'available' ? 'active' : 'inactive' })\n      .eq('license_number', doctorId) // Use license_number instead of doctor_id\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating doctor availability:', error);\n      throw new Error(`Failed to update doctor availability: ${error.message}`);\n    }\n\n    // Add computed fields for compatibility\n    const enhancedDoctor = {\n      ...doctor,\n      doctor_id: doctor.license_number,\n      department: getSpecializationDepartment(doctor.specialization),\n      experience_years: doctor.years_of_experience,\n      working_hours_start: '09:00',\n      working_hours_end: '17:00',\n      working_days: [1, 2, 3, 4, 5, 6],\n      floor_number: 1,\n      availability_status: availabilityStatus,\n      emergency_available: false\n    };\n\n    return enhancedDoctor;\n  } catch (error) {\n    console.error('Error updating doctor availability:', error);\n    throw error;\n  }\n}\n\n/**\n * Get doctors by specialization\n */\nexport async function getDoctorsBySpecialization(specialization: string): Promise<Doctor[]> {\n  try {\n    const { data: doctors, error } = await supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .eq('specialization', specialization)\n      .eq('status', 'active')\n      .order('created_at', { ascending: false }); // Changed from user.name since it might cause issues\n\n    if (error) {\n      console.error('Error fetching doctors by specialization:', error);\n      throw new Error(`Failed to fetch doctors: ${error.message}`);\n    }\n\n    // Add computed fields for compatibility\n    const enhancedDoctors = doctors?.map(doctor => ({\n      ...doctor,\n      doctor_id: doctor.license_number,\n      department: getSpecializationDepartment(doctor.specialization),\n      experience_years: doctor.years_of_experience,\n      working_hours_start: '09:00',\n      working_hours_end: '17:00',\n      working_days: [1, 2, 3, 4, 5, 6],\n      floor_number: 1,\n      availability_status: 'available',\n      emergency_available: false\n    })) || [];\n\n    return enhancedDoctors;\n  } catch (error) {\n    console.error('Error fetching doctors by specialization:', error);\n    throw error;\n  }\n}\n\n/**\n * Get available doctors for scheduling\n */\nexport async function getAvailableDoctors(\n  date: string,\n  time: string,\n  specialization?: string\n): Promise<Doctor[]> {\n  try {\n    let query = supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .eq('availability_status', 'available')\n      .eq('status', 'active');\n\n    if (specialization) {\n      query = query.eq('specialization', specialization);\n    }\n\n    const { data: doctors, error } = await query.order('user.name', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching available doctors:', error);\n      throw new Error(`Failed to fetch available doctors: ${error.message}`);\n    }\n\n    // Filter by working hours and days\n    const requestDate = new Date(date);\n    const dayOfWeek = requestDate.getDay();\n    const [hours, minutes] = time.split(':').map(Number);\n    const requestTimeMinutes = hours * 60 + minutes;\n\n    const availableDoctors = (doctors || []).filter(doctor => {\n      // Check if doctor works on this day\n      if (!doctor.working_days.includes(dayOfWeek)) {\n        return false;\n      }\n\n      // Check if time is within working hours\n      const startTime = doctor.working_hours_start.split(':').map(Number);\n      const endTime = doctor.working_hours_end.split(':').map(Number);\n      const startTimeMinutes = startTime[0] * 60 + startTime[1];\n      const endTimeMinutes = endTime[0] * 60 + endTime[1];\n\n      return requestTimeMinutes >= startTimeMinutes && requestTimeMinutes < endTimeMinutes;\n    });\n\n    return availableDoctors;\n  } catch (error) {\n    console.error('Error fetching available doctors:', error);\n    throw error;\n  }\n}\n\n/**\n * Get doctor statistics\n */\nexport async function getDoctorStats(doctorId?: string): Promise<{\n  totalAppointments: number;\n  todayAppointments: number;\n  completedAppointments: number;\n  pendingAppointments: number;\n}> {\n  try {\n    const today = new Date().toISOString().split('T')[0];\n    \n    let appointmentsQuery = supabase\n      .from('appointments')\n      .select('id, status, appointment_date');\n    \n    if (doctorId) {\n      appointmentsQuery = appointmentsQuery.eq('doctor_id', doctorId);\n    }\n    \n    const { data: appointments, error } = await appointmentsQuery;\n    \n    if (error) {\n      console.error('Error fetching appointment stats:', error);\n      throw new Error(`Failed to fetch appointment stats: ${error.message}`);\n    }\n    \n    const totalAppointments = appointments?.length || 0;\n    const todayAppointments = appointments?.filter(apt => apt.appointment_date === today).length || 0;\n    const completedAppointments = appointments?.filter(apt => apt.status === 'completed').length || 0;\n    const pendingAppointments = appointments?.filter(apt => \n      apt.status === 'scheduled' || apt.status === 'confirmed'\n    ).length || 0;\n    \n    return {\n      totalAppointments,\n      todayAppointments,\n      completedAppointments,\n      pendingAppointments\n    };\n  } catch (error) {\n    console.error('Error getting doctor stats:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all specializations\n */\nexport async function getAllSpecializations(): Promise<string[]> {\n  try {\n    const { data: specializations, error } = await supabase\n      .from('doctors')\n      .select('specialization')\n      .eq('status', 'active');\n\n    if (error) {\n      console.error('Error fetching specializations:', error);\n      throw new Error(`Failed to fetch specializations: ${error.message}`);\n    }\n\n    // Get unique specializations\n    const uniqueSpecializations = [...new Set(specializations?.map(s => s.specialization) || [])];\n    return uniqueSpecializations.sort();\n  } catch (error) {\n    console.error('Error fetching specializations:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all departments\n */\nexport async function getAllDepartments(): Promise<string[]> {\n  try {\n    // Since the current schema doesn't have department field,\n    // we'll return common hospital departments based on specializations\n    const { data: doctors, error } = await supabase\n      .from('doctors')\n      .select('specialization')\n      .eq('status', 'active');\n\n    if (error) {\n      console.error('Error fetching doctors:', error);\n      throw new Error(`Failed to fetch departments: ${error.message}`);\n    }\n\n    // Map specializations to departments\n    const specializationToDepartment: Record<string, string> = {\n      'Cardiology': 'Cardiology',\n      'Pediatrics': 'Pediatrics',\n      'Orthopedics': 'Orthopedics',\n      'Neurology': 'Neurology',\n      'Dermatology': 'Dermatology',\n      'Gynecology': 'Obstetrics & Gynecology',\n      'Psychiatry': 'Psychiatry',\n      'Radiology': 'Radiology',\n      'Anesthesiology': 'Anesthesiology',\n      'Emergency Medicine': 'Emergency',\n      'Internal Medicine': 'Internal Medicine',\n      'Surgery': 'Surgery',\n      'Oncology': 'Oncology',\n      'Ophthalmology': 'Ophthalmology',\n      'ENT': 'ENT (Ear, Nose & Throat)',\n      'Urology': 'Urology',\n      'Gastroenterology': 'Gastroenterology',\n      'Endocrinology': 'Endocrinology',\n      'Nephrology': 'Nephrology',\n      'Pulmonology': 'Pulmonology',\n      'Rheumatology': 'Rheumatology',\n      'Hematology': 'Hematology',\n      'Infectious Disease': 'Infectious Disease',\n      'Pathology': 'Pathology',\n      'Physical Medicine': 'Physical Medicine & Rehabilitation',\n      'Plastic Surgery': 'Plastic Surgery',\n      'Vascular Surgery': 'Vascular Surgery',\n      'Thoracic Surgery': 'Thoracic Surgery',\n      'Neurosurgery': 'Neurosurgery',\n      'Dental': 'Dental',\n      'Physiotherapy': 'Physiotherapy',\n      'Nutrition': 'Nutrition & Dietetics',\n      'Other': 'Other'\n    };\n\n    const departments = doctors?.map(d => \n      specializationToDepartment[d.specialization] || d.specialization\n    ) || [];\n    \n    const uniqueDepartments = [...new Set(departments)];\n    return uniqueDepartments.sort();\n  } catch (error) {\n    console.error('Error fetching departments:', error);\n    throw error;\n  }\n}\n\n/**\n * Update doctor information\n */\nexport async function updateDoctor(\n  doctorId: string,\n  updates: Partial<DoctorRegistrationData>\n): Promise<Doctor> {\n  try {\n    const { data: doctor, error } = await supabase\n      .from('doctors')\n      .update(updates)\n      .eq('doctor_id', doctorId)\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating doctor:', error);\n      throw new Error(`Failed to update doctor: ${error.message}`);\n    }\n\n    return doctor;\n  } catch (error) {\n    console.error('Error updating doctor:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1482, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/barcodeUtils.ts"],"sourcesContent":["import { supabase } from './supabase';\n\n/**\n * Generate a barcode ID for a patient\n * Format: BARS{Year}{Month}{RandomDigits}\n * Example: BARS2025010001\n */\nexport function generateBarcodeId(uhid: string): string {\n  const now = new Date();\n  const year = now.getFullYear().toString();\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  \n  // Use UHID as base and add timestamp for uniqueness\n  const timestamp = now.getTime().toString().slice(-4); // Last 4 digits of timestamp\n  \n  return `BARS${year}${month}${timestamp}`;\n}\n\n/**\n * Generate SVG barcode using Code-128 format\n * This is a simplified implementation - in production, you'd use a proper barcode library\n */\nexport function generateBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const barWidth = 2;\n  const barsCount = barcodeId.length * 6; // Approximate for Code-128\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate bars pattern (simplified)\n  let x = 10;\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create alternating pattern based on character\n    for (let j = 0; j < 6; j++) {\n      if ((charCode + j) % 2 === 0) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n    }\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Generate a more realistic barcode pattern\n * This creates a pattern that looks more like a real barcode\n */\nexport function generateRealisticBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const minBarWidth = 1;\n  const maxBarWidth = 4;\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate more realistic bar pattern\n  let x = 20;\n  let isBlack = true;\n  \n  // Start and end patterns\n  const startPattern = [1, 1, 1, 1, 1, 1];\n  const endPattern = [1, 1, 1, 1, 1, 1];\n  \n  // Draw start pattern\n  for (const barWidth of startPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Draw data pattern\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create pattern based on character\n    const pattern = [];\n    for (let j = 0; j < 6; j++) {\n      const width = minBarWidth + ((charCode + j) % (maxBarWidth - minBarWidth + 1));\n      pattern.push(width);\n    }\n    \n    for (const barWidth of pattern) {\n      if (isBlack) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n      isBlack = !isBlack;\n    }\n  }\n  \n  // Draw end pattern\n  for (const barWidth of endPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Update patient with barcode ID\n */\nexport async function updatePatientWithBarcode(patientId: string, barcodeId: string): Promise<void> {\n  try {\n    const { error } = await supabase\n      .from('patients')\n      .update({ barcode_id: barcodeId })\n      .eq('patient_id', patientId);\n    \n    if (error) {\n      console.error('Error updating patient with barcode:', error);\n      throw new Error(`Failed to update patient with barcode: ${error.message}`);\n    }\n  } catch (error) {\n    console.error('Error updating patient with barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by barcode ID\n */\nexport async function getPatientByBarcodeId(barcodeId: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('barcode_id', barcodeId)\n      .single();\n    \n    if (error) {\n      console.error('Error fetching patient by barcode:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Generate printable barcode data\n */\nexport function generatePrintableBarcodeData(uhid: string, barcodeId: string, patientName: string): string {\n  const svg = generateRealisticBarcodeSVG(barcodeId);\n  \n  return `\n    <div style=\"width: 4in; height: 2in; padding: 0.2in; font-family: Arial, sans-serif; border: 1px solid #ccc; margin: 0.1in;\">\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        <h3 style=\"margin: 0; font-size: 14px; color: #333;\">ANNAM HOSPITAL</h3>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">Patient ID Card</p>\n      </div>\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        ${svg}\n      </div>\n      <div style=\"text-align: center; font-size: 12px;\">\n        <p style=\"margin: 0; font-weight: bold;\">${patientName}</p>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">UHID: ${uhid}</p>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Validate barcode ID format\n */\nexport function validateBarcodeId(barcodeId: string): boolean {\n  // Check if it matches the format: BARS{Year}{Month}{4digits}\n  const barcodeRegex = /^BARS\\d{4}(0[1-9]|1[0-2])\\d{4}$/;\n  return barcodeRegex.test(barcodeId);\n}\n\n/**\n * Extract information from barcode ID\n */\nexport function extractBarcodeInfo(barcodeId: string): {\n  year: string;\n  month: string;\n  sequence: string;\n} | null {\n  if (!validateBarcodeId(barcodeId)) {\n    return null;\n  }\n  \n  const year = barcodeId.substring(4, 8);\n  const month = barcodeId.substring(8, 10);\n  const sequence = barcodeId.substring(10, 14);\n  \n  return { year, month, sequence };\n}\n\n/**\n * Generate barcode for existing patient\n */\nexport async function generateBarcodeForPatient(patientId: string): Promise<string> {\n  try {\n    // Check if patient already has a barcode\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('barcode_id, patient_id')\n      .eq('patient_id', patientId)\n      .single();\n    \n    if (error) {\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    // If patient already has a barcode, return it\n    if (patient.barcode_id && patient.barcode_id.trim() !== '') {\n      return patient.barcode_id;\n    }\n    \n    // Generate new barcode\n    const barcodeId = generateBarcodeId(patientId);\n    \n    // Update patient with barcode\n    await updatePatientWithBarcode(patientId, barcodeId);\n    \n    return barcodeId;\n  } catch (error) {\n    console.error('Error generating barcode for patient:', error);\n    throw error;\n  }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1686, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/patientService.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { generateBarcodeId, updatePatientWithBarcode } from './barcodeUtils';\n\n// Types - Updated to match comprehensive registration form\nexport interface PatientRegistrationData {\n  // Personal Information (Mandatory)\n  firstName: string;\n  lastName: string;\n  dateOfBirth: string;\n  gender: string;\n  maritalStatus?: string; // single, married, divorced, widowed, separated\n  phone: string;\n  email?: string;\n  address: string;\n  \n  // Medical & Admission Information \n  bloodGroup: string;\n  allergies: string;\n  medicalHistory: string;\n  currentMedications: string;\n  chronicConditions: string;\n  previousSurgeries: string;\n  \n  // Admission Details\n  admissionDate?: string;\n  admissionTime?: string;\n  primaryComplaint: string;\n  admissionType: string; // emergency, elective, referred\n  referringDoctorFacility?: string;\n  consultingDoctorId?: string;\n  consultingDoctorName?: string;\n  departmentWard?: string;\n  roomNumber?: string;\n  \n  // Guardian/Attendant Details (Optional)\n  guardianName?: string;\n  guardianRelationship?: string;\n  guardianPhone?: string;\n  guardianAddress?: string;\n  \n  // Emergency Contact (Optional)\n  emergencyContactName?: string;\n  emergencyContactPhone?: string;\n  emergencyContactRelationship?: string;\n  \n  // Insurance Information (Optional)\n  insuranceProvider?: string;\n  insuranceNumber?: string;\n  \n  // Initial Visit Information\n  initialSymptoms?: string;\n  referredBy?: string;\n}\n\nexport interface PatientResponse {\n  success: boolean;\n  patient?: any;\n  uhid?: string;\n  credentials?: {\n    email: string;\n    password: string;\n  };\n  error?: string;\n}\n\n/**\n * Generate a unique UHID (Unique Hospital ID) for a new patient\n * Format: UHID + current year + 6-digit sequential number\n * Example: UHID2025000001\n */\nexport async function generateUHID(): Promise<string> {\n  const now = new Date();\n  const yearTwoDigits = now.getFullYear().toString().slice(-2); // Last two digits of year\n  const month = (now.getMonth() + 1).toString().padStart(2, '0'); // Month with leading zero\n  \n  try {\n    // Generate a unique 4-digit random number\n    let uhid: string = '';\n    let isUnique = false;\n    let attempts = 0;\n    const maxAttempts = 1000;\n    \n    while (!isUnique && attempts < maxAttempts) {\n      // Generate 4-digit random number\n      const randomNumber = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\n      uhid = `AH${yearTwoDigits}${month}${randomNumber}`;\n      \n      // Check if this UHID already exists\n      const { data: existing, error } = await supabase\n        .from('patients')\n        .select('patient_id')\n        .eq('patient_id', uhid)\n        .single();\n      \n      if (error && error.code === 'PGRST116') {\n        // No record found, UHID is unique\n        isUnique = true;\n      } else if (error) {\n        console.error('Error checking UHID uniqueness:', error);\n        throw new Error('Failed to generate UHID');\n      }\n      \n      attempts++;\n    }\n    \n    if (!isUnique) {\n      throw new Error('Failed to generate unique UHID after maximum attempts');\n    }\n    \n    return uhid;\n  } catch (error) {\n    console.error('Error generating UHID:', error);\n    throw new Error('Failed to generate UHID');\n  }\n}\n\n/**\n * Create authentication credentials for a new patient\n * Email format: UHID@annam.com\n * Password: \"password\" (as specified in requirements)\n */\nexport async function createPatientAuthCredentials(uhid: string): Promise<{ \n  authUser: any; \n  credentials: { email: string; password: string } \n}> {\n  const email = `${uhid}@annam.com`;\n  const password = 'password';\n\n  try {\n    // Create auth user using Supabase Admin API\n    const { data: authUser, error: authError } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo: `${window.location.origin}/auth/callback`,\n        data: {\n          role: 'patient',\n          uhid: uhid,\n          email_confirm: true\n        }\n      }\n    });\n\n    if (authError) {\n      console.error('Error creating auth user:', authError);\n      throw new Error(`Failed to create authentication: ${authError.message}`);\n    }\n\n    return {\n      authUser: authUser.user,\n      credentials: { email, password }\n    };\n  } catch (error) {\n    console.error('Error creating patient auth credentials:', error);\n    throw error;\n  }\n}\n\n/**\n * Insert comprehensive patient record into the patients table with all new fields\n */\nexport async function insertPatientRecord(\n  uhid: string, \n  registrationData: PatientRegistrationData,\n  userId?: string\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    // Generate barcode ID\n    const barcodeId = generateBarcodeId(uhid);\n    \n    // Prepare admission date and time\n    let admissionDateTime = null;\n    if (registrationData.admissionDate) {\n      if (registrationData.admissionTime) {\n        admissionDateTime = `${registrationData.admissionDate}T${registrationData.admissionTime}`;\n      } else {\n        admissionDateTime = `${registrationData.admissionDate}T00:00:00`;\n      }\n    }\n    \n    const patientData = {\n      // Basic Information\n      patient_id: uhid,\n      barcode_id: barcodeId, // Add barcode ID\n      name: fullName,\n      date_of_birth: registrationData.dateOfBirth,\n      gender: registrationData.gender.toLowerCase(),\n      marital_status: registrationData.maritalStatus || null,\n      phone: registrationData.phone,\n      email: registrationData.email || `${uhid}@annam.com`,\n      address: registrationData.address,\n      \n      // Medical Information\n      blood_group: registrationData.bloodGroup || null,\n      allergies: registrationData.allergies || null,\n      medical_history: registrationData.medicalHistory || null,\n      current_medications: registrationData.currentMedications || null,\n      chronic_conditions: registrationData.chronicConditions || null,\n      previous_surgeries: registrationData.previousSurgeries || null,\n      \n      // New Admission Information\n      admission_date: admissionDateTime,\n      admission_time: registrationData.admissionTime || null,\n      primary_complaint: registrationData.primaryComplaint,\n      admission_type: registrationData.admissionType,\n      referring_doctor_facility: registrationData.referringDoctorFacility || null,\n      department_ward: registrationData.departmentWard || null,\n      room_number: registrationData.roomNumber || null,\n      \n      // Guardian/Attendant Details (Optional)\n      guardian_name: registrationData.guardianName || null,\n      guardian_relationship: registrationData.guardianRelationship || null,\n      guardian_phone: registrationData.guardianPhone || null,\n      guardian_address: registrationData.guardianAddress || null,\n      \n      // Emergency Contact (Optional)\n      emergency_contact_name: registrationData.emergencyContactName || null,\n      emergency_contact_phone: registrationData.emergencyContactPhone || null,\n      emergency_contact_relationship: registrationData.emergencyContactRelationship || null,\n      \n      // Insurance Information\n      insurance_number: registrationData.insuranceNumber || null,\n      insurance_provider: registrationData.insuranceProvider || null,\n      \n      // Additional fields\n      initial_symptoms: registrationData.initialSymptoms || null,\n      referred_by: registrationData.referredBy || null,\n      \n      // Link to users table\n      user_id: userId || null,\n      \n      // System fields\n      status: 'active'\n    };\n\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .insert([patientData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error inserting patient record:', error);\n      throw new Error(`Failed to create patient record: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error inserting patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Link the Supabase auth user to the users table for role management\n */\nexport async function linkAuthUserToPatient(\n  authUserId: string, \n  uhid: string, \n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    const userData = {\n      auth_id: authUserId,\n      employee_id: uhid, // Using UHID as employee_id for patients\n      name: fullName,\n      email: registrationData.email || `${uhid}@annam.com`,\n      role: 'patient',\n      phone: registrationData.phone,\n      address: registrationData.address,\n      status: 'active',\n      permissions: {\n        patient_portal: true,\n        view_own_records: true,\n        book_appointments: true\n      }\n    };\n\n    const { data: user, error } = await supabase\n      .from('users')\n      .insert([userData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error linking auth user to patient:', error);\n      throw new Error(`Failed to create user record: ${error.message}`);\n    }\n\n    return user;\n  } catch (error) {\n    console.error('Error linking auth user to patient:', error);\n    throw error;\n  }\n}\n\n/**\n * Create an initial appointment if symptoms are provided\n */\nexport async function createInitialAppointment(\n  patientId: string,\n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    if (!registrationData.initialSymptoms?.trim() && !registrationData.primaryComplaint?.trim()) {\n      return null; // No appointment needed if no symptoms\n    }\n\n    // Generate appointment ID\n    const appointmentId = `APT${Date.now()}`;\n    \n    // Use tomorrow as default appointment date\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    \n    const appointmentData = {\n      appointment_id: appointmentId,\n      patient_id: patientId,\n      appointment_date: tomorrow.toISOString().split('T')[0],\n      appointment_time: '09:00:00',\n      type: 'consultation',\n      status: 'scheduled',\n      symptoms: registrationData.initialSymptoms || registrationData.primaryComplaint,\n      notes: `Initial consultation for newly registered patient. Primary complaint: ${registrationData.primaryComplaint}`\n    };\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .insert([appointmentData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error creating initial appointment:', error);\n      // Don't throw error for appointment creation failure\n      return null;\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error creating initial appointment:', error);\n    // Don't throw error for appointment creation failure\n    return null;\n  }\n}\n\n/**\n * Main function to register a new patient with complete workflow\n */\nexport async function registerNewPatient(\n  registrationData: PatientRegistrationData,\n  preGeneratedUHID?: string\n): Promise<PatientResponse> {\n  try {\n    // Step 1: Use pre-generated UHID or generate new one\n    const uhid = preGeneratedUHID || await generateUHID();\n    console.log('Using UHID:', uhid);\n\n    // Step 2: Create authentication credentials\n    const { authUser, credentials } = await createPatientAuthCredentials(uhid);\n    console.log('Created auth user:', authUser?.id);\n\n    // Step 3: Create user record in users table\n    const userRecord = await linkAuthUserToPatient(authUser.id, uhid, registrationData);\n    console.log('Created user record:', userRecord.id);\n\n    // Step 4: Insert patient record with user_id link\n    const patient = await insertPatientRecord(uhid, registrationData, userRecord.id);\n    console.log('Created patient record:', patient.id);\n\n    // Step 5: Create initial appointment if symptoms provided\n    if (registrationData.initialSymptoms?.trim() || registrationData.primaryComplaint?.trim()) {\n      const appointment = await createInitialAppointment(patient.id, registrationData);\n      if (appointment) {\n        console.log('Created initial appointment:', appointment.id);\n      }\n    }\n\n    return {\n      success: true,\n      patient,\n      uhid,\n      credentials,\n    };\n\n  } catch (error) {\n    console.error('Error registering new patient:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    };\n  }\n}\n\n/**\n * Validate that UHID is unique\n */\nexport async function validateUHIDUnique(uhid: string): Promise<boolean> {\n  try {\n    const { data: existingPatient, error } = await supabase\n      .from('patients')\n      .select('patient_id')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error && error.code !== 'PGRST116') {\n      console.error('Error validating UHID uniqueness:', error);\n      throw new Error('Failed to validate UHID');\n    }\n\n    return !existingPatient; // Return true if no existing patient found\n  } catch (error) {\n    console.error('Error validating UHID uniqueness:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by UHID with comprehensive data\n */\nexport async function getPatientByUHID(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient by UHID:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by UHID:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient with related data (appointments, bills, etc.)\n */\nexport async function getPatientWithRelatedData(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        ),\n        appointments:appointments(\n          id,\n          appointment_id,\n          appointment_date,\n          appointment_time,\n          type,\n          status,\n          symptoms,\n          diagnosis,\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        ),\n        bed_allocations:bed_allocations(\n          id,\n          admission_date,\n          discharge_date,\n          admission_type,\n          status,\n          bed:beds(bed_number, room_number, bed_type),\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        )\n      `)\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient with related data:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient with related data:', error);\n    throw error;\n  }\n}\n\n/**\n * Update patient information\n */\nexport async function updatePatientRecord(\n  uhid: string, \n  updateData: any\n): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .update(updateData)\n      .eq('patient_id', uhid)\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error updating patient record:', error);\n      throw new Error(`Failed to update patient: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error updating patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all patients with pagination and filtering\n */\nexport async function getAllPatients(\n  options: {\n    page?: number;\n    limit?: number;\n    status?: string;\n    searchTerm?: string;\n  } = {}\n): Promise<{ patients: any[]; total: number; page: number; limit: number }> {\n  try {\n    const { page = 1, limit = 20, status, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        )\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (status) {\n      query = query.eq('status', status);\n    }\n\n    if (searchTerm) {\n      query = query.or(`name.ilike.%${searchTerm}%,patient_id.ilike.%${searchTerm}%,phone.ilike.%${searchTerm}%`);\n    }\n\n    // Apply pagination\n    const { data: patients, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching patients:', error);\n      throw new Error(`Failed to fetch patients: ${error.message}`);\n    }\n\n    return {\n      patients: patients || [],\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching patients:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2081, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/components/AppointmentBookingModal.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport { X, Calendar, Clock, User, AlertTriangle, CheckCircle, Lightbulb } from 'lucide-react';\nimport { validateAppointmentWithSuggestions, createAppointment, AppointmentData, AppointmentSlot } from '../lib/appointmentService';\nimport { getAllDoctors, Doctor } from '../lib/doctorService';\nimport { getAllPatients } from '../lib/patientService';\n\n// Patient interface for appointment booking\ninterface Patient {\n  id: string;\n  patient_id: string;\n  name: string;\n  phone: string;\n  email?: string;\n  date_of_birth: string;\n  gender: string;\n  status: string;\n}\n\ninterface AppointmentBookingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: (appointment: any) => void;\n}\n\nexport default function AppointmentBookingModal({ isOpen, onClose, onSuccess }: AppointmentBookingModalProps) {\n  const [formData, setFormData] = useState<AppointmentData>({\n    patientId: '',\n    doctorId: '',\n    appointmentDate: '',\n    appointmentTime: '',\n    durationMinutes: 30,\n    type: 'consultation',\n    symptoms: '',\n    chiefComplaint: '',\n    notes: ''\n  });\n  \n  const [doctors, setDoctors] = useState<Doctor[]>([]);\n  const [patients, setPatients] = useState<Patient[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [validationErrors, setValidationErrors] = useState<string[]>([]);\n  const [validationWarnings, setValidationWarnings] = useState<string[]>([]);\n  const [suggestions, setSuggestions] = useState<AppointmentSlot[]>([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      loadDoctorsAndPatients();\n    }\n  }, [isOpen]);\n\n  const loadDoctorsAndPatients = async () => {\n    try {\n      const [doctorsResponse, patientsResponse] = await Promise.all([\n        getAllDoctors(),\n        getAllPatients({ limit: 100 })\n      ]);\n      setDoctors(doctorsResponse.doctors || []);\n      setPatients(patientsResponse.patients || []);\n    } catch (error) {\n      console.error('Error loading data:', error);\n    }\n  };\n\n  const handleInputChange = (field: keyof AppointmentData, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    // Clear validation errors when user makes changes\n    if (validationErrors.length > 0) {\n      setValidationErrors([]);\n      setValidationWarnings([]);\n      setSuggestions([]);\n      setShowSuggestions(false);\n    }\n  };\n\n  const validateForm = async () => {\n    if (!formData.patientId || !formData.doctorId || !formData.appointmentDate || !formData.appointmentTime) {\n      setValidationErrors(['Please fill in all required fields']);\n      return false;\n    }\n\n    try {\n      const validation = await validateAppointmentWithSuggestions(formData);\n      \n      setValidationErrors(validation.errors);\n      setValidationWarnings(validation.warnings);\n      \n      if (validation.suggestions && validation.suggestions.length > 0) {\n        setSuggestions(validation.suggestions);\n        setShowSuggestions(true);\n      }\n      \n      return validation.isValid;\n    } catch (error) {\n      console.error('Validation error:', error);\n      setValidationErrors(['Validation failed. Please try again.']);\n      return false;\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const isValid = await validateForm();\n      \n      if (!isValid) {\n        setLoading(false);\n        return;\n      }\n\n      const newAppointment = await createAppointment(formData);\n      onSuccess(newAppointment);\n      onClose();\n      resetForm();\n    } catch (error: any) {\n      console.error('Error creating appointment:', error);\n      setValidationErrors([error.message || 'Failed to create appointment']);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSuggestionSelect = (suggestion: AppointmentSlot) => {\n    setFormData(prev => ({\n      ...prev,\n      appointmentDate: suggestion.date,\n      appointmentTime: suggestion.time\n    }));\n    setShowSuggestions(false);\n    setValidationErrors([]);\n    setValidationWarnings([]);\n    setSuggestions([]);\n  };\n\n  const resetForm = () => {\n    setFormData({\n      patientId: '',\n      doctorId: '',\n      appointmentDate: '',\n      appointmentTime: '',\n      durationMinutes: 30,\n      type: 'consultation',\n      symptoms: '',\n      chiefComplaint: '',\n      notes: ''\n    });\n    setValidationErrors([]);\n    setValidationWarnings([]);\n    setSuggestions([]);\n    setShowSuggestions(false);\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString('en-US', {\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const formatTime = (timeStr: string) => {\n    const [hours, minutes] = timeStr.split(':');\n    const hour = parseInt(hours);\n    const ampm = hour >= 12 ? 'PM' : 'AM';\n    const displayHour = hour % 12 || 12;\n    return `${displayHour}:${minutes} ${ampm}`;\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n          <div>\n            <h2 className=\"text-xl font-bold text-gray-900\">Book New Appointment</h2>\n            <p className=\"text-gray-500 text-sm mt-1\">Schedule a new patient appointment</p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 rounded-xl transition-colors\"\n          >\n            <X size={20} className=\"text-gray-500\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          {/* Validation Errors */}\n          {validationErrors.length > 0 && (\n            <div className=\"bg-red-50 border border-red-200 rounded-xl p-4\">\n              <div className=\"flex items-start\">\n                <AlertTriangle className=\"text-red-500 mt-0.5 mr-3\" size={16} />\n                <div>\n                  <h4 className=\"text-red-800 font-medium text-sm\">Validation Errors</h4>\n                  <ul className=\"text-red-700 text-sm mt-1 space-y-1\">\n                    {validationErrors.map((error, index) => (\n                      <li key={index}> {error}</li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Validation Warnings */}\n          {validationWarnings.length > 0 && (\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-4\">\n              <div className=\"flex items-start\">\n                <AlertTriangle className=\"text-yellow-500 mt-0.5 mr-3\" size={16} />\n                <div>\n                  <h4 className=\"text-yellow-800 font-medium text-sm\">Warnings</h4>\n                  <ul className=\"text-yellow-700 text-sm mt-1 space-y-1\">\n                    {validationWarnings.map((warning, index) => (\n                      <li key={index}> {warning}</li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Smart Suggestions */}\n          {showSuggestions && suggestions.length > 0 && (\n            <div className=\"bg-blue-50 border border-blue-200 rounded-xl p-4\">\n              <div className=\"flex items-start\">\n                <Lightbulb className=\"text-blue-500 mt-0.5 mr-3\" size={16} />\n                <div className=\"flex-1\">\n                  <h4 className=\"text-blue-800 font-medium text-sm\">Alternative Time Slots</h4>\n                  <p className=\"text-blue-700 text-sm mt-1 mb-3\">Here are some available alternatives:</p>\n                  <div className=\"space-y-2\">\n                    {suggestions.map((suggestion, index) => (\n                      <button\n                        key={index}\n                        type=\"button\"\n                        onClick={() => handleSuggestionSelect(suggestion)}\n                        className=\"w-full text-left p-3 bg-white border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors\"\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <div className=\"font-medium text-blue-900 text-sm\">\n                              {formatDate(suggestion.date)}\n                            </div>\n                            <div className=\"text-blue-700 text-sm\">\n                              {formatTime(suggestion.time)}\n                            </div>\n                          </div>\n                          <CheckCircle className=\"text-blue-500\" size={16} />\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Form Fields */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {/* Patient Selection */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <User size={16} className=\"inline mr-2\" />\n                Patient *\n              </label>\n              <select\n                value={formData.patientId}\n                onChange={(e) => handleInputChange('patientId', e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n                required\n              >\n                <option value=\"\">Select a patient</option>\n                {patients.map((patient) => (\n                  <option key={patient.id} value={patient.id}>\n                    {patient.name} - {patient.patient_id}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Doctor Selection */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <User size={16} className=\"inline mr-2\" />\n                Doctor *\n              </label>\n              <select\n                value={formData.doctorId}\n                onChange={(e) => handleInputChange('doctorId', e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n                required\n              >\n                <option value=\"\">Select a doctor</option>\n                {doctors.map((doctor) => (\n                  <option key={doctor.id} value={doctor.id}>\n                    Dr. {doctor.user?.name || 'Unknown'} - {doctor.specialization}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Date */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Calendar size={16} className=\"inline mr-2\" />\n                Date *\n              </label>\n              <input\n                type=\"date\"\n                value={formData.appointmentDate}\n                onChange={(e) => handleInputChange('appointmentDate', e.target.value)}\n                min={new Date().toISOString().split('T')[0]}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n                required\n              />\n            </div>\n\n            {/* Time */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                <Clock size={16} className=\"inline mr-2\" />\n                Time *\n              </label>\n              <input\n                type=\"time\"\n                value={formData.appointmentTime}\n                onChange={(e) => handleInputChange('appointmentTime', e.target.value)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n                required\n              />\n            </div>\n\n            {/* Duration */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Duration (minutes)\n              </label>\n              <select\n                value={formData.durationMinutes}\n                onChange={(e) => handleInputChange('durationMinutes', parseInt(e.target.value))}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n              >\n                <option value={15}>15 minutes</option>\n                <option value={30}>30 minutes</option>\n                <option value={45}>45 minutes</option>\n                <option value={60}>1 hour</option>\n                <option value={90}>1.5 hours</option>\n                <option value={120}>2 hours</option>\n              </select>\n            </div>\n\n            {/* Appointment Type */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Appointment Type\n              </label>\n              <select\n                value={formData.type}\n                onChange={(e) => handleInputChange('type', e.target.value as any)}\n                className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n              >\n                <option value=\"consultation\">Consultation</option>\n                <option value=\"follow_up\">Follow-up</option>\n                <option value=\"routine_checkup\">Routine Checkup</option>\n                <option value=\"emergency\">Emergency</option>\n                <option value=\"new_patient\">New Patient</option>\n              </select>\n            </div>\n          </div>\n\n          {/* Chief Complaint */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Chief Complaint\n            </label>\n            <input\n              type=\"text\"\n              value={formData.chiefComplaint || ''}\n              onChange={(e) => handleInputChange('chiefComplaint', e.target.value)}\n              placeholder=\"Brief description of the main concern\"\n              className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all\"\n            />\n          </div>\n\n          {/* Symptoms */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Symptoms\n            </label>\n            <textarea\n              value={formData.symptoms || ''}\n              onChange={(e) => handleInputChange('symptoms', e.target.value)}\n              placeholder=\"Describe any symptoms the patient is experiencing\"\n              rows={3}\n              className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none\"\n            />\n          </div>\n\n          {/* Notes */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Additional Notes\n            </label>\n            <textarea\n              value={formData.notes || ''}\n              onChange={(e) => handleInputChange('notes', e.target.value)}\n              placeholder=\"Any additional information or special instructions\"\n              rows={3}\n              className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all resize-none\"\n            />\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex items-center justify-end space-x-4 pt-6 border-t border-gray-100\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                  Creating...\n                </>\n              ) : (\n                'Create Appointment'\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AALA;;;;;;;AAyBe,SAAS,wBAAwB,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAgC;IAC1G,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;QACxD,WAAW;QACX,UAAU;QACV,iBAAiB;QACjB,iBAAiB;QACjB,iBAAiB;QACjB,MAAM;QACN,UAAU;QACV,gBAAgB;QAChB,OAAO;IACT;IAEA,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACrE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACzE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAqB,EAAE;IACpE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;YACV;QACF;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,yBAAyB;QAC7B,IAAI;YACF,MAAM,CAAC,iBAAiB,iBAAiB,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC5D,CAAA,GAAA,2HAAA,CAAA,gBAAa,AAAD;gBACZ,CAAA,GAAA,4HAAA,CAAA,iBAAc,AAAD,EAAE;oBAAE,OAAO;gBAAI;aAC7B;YACD,WAAW,gBAAgB,OAAO,IAAI,EAAE;YACxC,YAAY,iBAAiB,QAAQ,IAAI,EAAE;QAC7C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,uBAAuB;QACvC;IACF;IAEA,MAAM,oBAAoB,CAAC,OAA8B;QACvD,YAAY,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,MAAM,EAAE;YAAM,CAAC;QAChD,kDAAkD;QAClD,IAAI,iBAAiB,MAAM,GAAG,GAAG;YAC/B,oBAAoB,EAAE;YACtB,sBAAsB,EAAE;YACxB,eAAe,EAAE;YACjB,mBAAmB;QACrB;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,SAAS,SAAS,IAAI,CAAC,SAAS,QAAQ,IAAI,CAAC,SAAS,eAAe,IAAI,CAAC,SAAS,eAAe,EAAE;YACvG,oBAAoB;gBAAC;aAAqC;YAC1D,OAAO;QACT;QAEA,IAAI;YACF,MAAM,aAAa,MAAM,CAAA,GAAA,gIAAA,CAAA,qCAAkC,AAAD,EAAE;YAE5D,oBAAoB,WAAW,MAAM;YACrC,sBAAsB,WAAW,QAAQ;YAEzC,IAAI,WAAW,WAAW,IAAI,WAAW,WAAW,CAAC,MAAM,GAAG,GAAG;gBAC/D,eAAe,WAAW,WAAW;gBACrC,mBAAmB;YACrB;YAEA,OAAO,WAAW,OAAO;QAC3B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qBAAqB;YACnC,oBAAoB;gBAAC;aAAuC;YAC5D,OAAO;QACT;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI;YACF,MAAM,UAAU,MAAM;YAEtB,IAAI,CAAC,SAAS;gBACZ,WAAW;gBACX;YACF;YAEA,MAAM,iBAAiB,MAAM,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE;YAC/C,UAAU;YACV;YACA;QACF,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,oBAAoB;gBAAC,MAAM,OAAO,IAAI;aAA+B;QACvE,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,yBAAyB,CAAC;QAC9B,YAAY,CAAA,OAAQ,CAAC;gBACnB,GAAG,IAAI;gBACP,iBAAiB,WAAW,IAAI;gBAChC,iBAAiB,WAAW,IAAI;YAClC,CAAC;QACD,mBAAmB;QACnB,oBAAoB,EAAE;QACtB,sBAAsB,EAAE;QACxB,eAAe,EAAE;IACnB;IAEA,MAAM,YAAY;QAChB,YAAY;YACV,WAAW;YACX,UAAU;YACV,iBAAiB;YACjB,iBAAiB;YACjB,iBAAiB;YACjB,MAAM;YACN,UAAU;YACV,gBAAgB;YAChB,OAAO;QACT;QACA,oBAAoB,EAAE;QACtB,sBAAsB,EAAE;QACxB,eAAe,EAAE;QACjB,mBAAmB;IACrB;IAEA,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,KAAK,SAAS,kBAAkB,CAAC,SAAS;YACnD,SAAS;YACT,MAAM;YACN,OAAO;YACP,KAAK;QACP;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,MAAM,CAAC,OAAO,QAAQ,GAAG,QAAQ,KAAK,CAAC;QACvC,MAAM,OAAO,SAAS;QACtB,MAAM,OAAO,QAAQ,KAAK,OAAO;QACjC,MAAM,cAAc,OAAO,MAAM;QACjC,OAAO,GAAG,YAAY,CAAC,EAAE,QAAQ,CAAC,EAAE,MAAM;IAC5C;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAkC;;;;;;8CAChD,8OAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;sCAE5C,8OAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,8OAAC,4LAAA,CAAA,IAAC;gCAAC,MAAM;gCAAI,WAAU;;;;;;;;;;;;;;;;;8BAI3B,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;wBAErC,iBAAiB,MAAM,GAAG,mBACzB,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;wCAA2B,MAAM;;;;;;kDAC1D,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAmC;;;;;;0DACjD,8OAAC;gDAAG,WAAU;0DACX,iBAAiB,GAAG,CAAC,CAAC,OAAO,sBAC5B,8OAAC;;4DAAe;4DAAG;;uDAAV;;;;;;;;;;;;;;;;;;;;;;;;;;;wBASpB,mBAAmB,MAAM,GAAG,mBAC3B,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;wCAA8B,MAAM;;;;;;kDAC7D,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAsC;;;;;;0DACpD,8OAAC;gDAAG,WAAU;0DACX,mBAAmB,GAAG,CAAC,CAAC,SAAS,sBAChC,8OAAC;;4DAAe;4DAAG;;uDAAV;;;;;;;;;;;;;;;;;;;;;;;;;;;wBASpB,mBAAmB,YAAY,MAAM,GAAG,mBACvC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,4MAAA,CAAA,YAAS;wCAAC,WAAU;wCAA4B,MAAM;;;;;;kDACvD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAClD,8OAAC;gDAAE,WAAU;0DAAkC;;;;;;0DAC/C,8OAAC;gDAAI,WAAU;0DACZ,YAAY,GAAG,CAAC,CAAC,YAAY,sBAC5B,8OAAC;wDAEC,MAAK;wDACL,SAAS,IAAM,uBAAuB;wDACtC,WAAU;kEAEV,cAAA,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;;sFACC,8OAAC;4EAAI,WAAU;sFACZ,WAAW,WAAW,IAAI;;;;;;sFAE7B,8OAAC;4EAAI,WAAU;sFACZ,WAAW,WAAW,IAAI;;;;;;;;;;;;8EAG/B,8OAAC,2NAAA,CAAA,cAAW;oEAAC,WAAU;oEAAgB,MAAM;;;;;;;;;;;;uDAd1C;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAyBnB,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;;8DACf,8OAAC,kMAAA,CAAA,OAAI;oDAAC,MAAM;oDAAI,WAAU;;;;;;gDAAgB;;;;;;;sDAG5C,8OAAC;4CACC,OAAO,SAAS,SAAS;4CACzB,UAAU,CAAC,IAAM,kBAAkB,aAAa,EAAE,MAAM,CAAC,KAAK;4CAC9D,WAAU;4CACV,QAAQ;;8DAER,8OAAC;oDAAO,OAAM;8DAAG;;;;;;gDAChB,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC;wDAAwB,OAAO,QAAQ,EAAE;;4DACvC,QAAQ,IAAI;4DAAC;4DAAI,QAAQ,UAAU;;uDADzB,QAAQ,EAAE;;;;;;;;;;;;;;;;;8CAQ7B,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;;8DACf,8OAAC,kMAAA,CAAA,OAAI;oDAAC,MAAM;oDAAI,WAAU;;;;;;gDAAgB;;;;;;;sDAG5C,8OAAC;4CACC,OAAO,SAAS,QAAQ;4CACxB,UAAU,CAAC,IAAM,kBAAkB,YAAY,EAAE,MAAM,CAAC,KAAK;4CAC7D,WAAU;4CACV,QAAQ;;8DAER,8OAAC;oDAAO,OAAM;8DAAG;;;;;;gDAChB,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wDAAuB,OAAO,OAAO,EAAE;;4DAAE;4DACnC,OAAO,IAAI,EAAE,QAAQ;4DAAU;4DAAI,OAAO,cAAc;;uDADlD,OAAO,EAAE;;;;;;;;;;;;;;;;;8CAQ5B,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;;8DACf,8OAAC,0MAAA,CAAA,WAAQ;oDAAC,MAAM;oDAAI,WAAU;;;;;;gDAAgB;;;;;;;sDAGhD,8OAAC;4CACC,MAAK;4CACL,OAAO,SAAS,eAAe;4CAC/B,UAAU,CAAC,IAAM,kBAAkB,mBAAmB,EAAE,MAAM,CAAC,KAAK;4CACpE,KAAK,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;4CAC3C,WAAU;4CACV,QAAQ;;;;;;;;;;;;8CAKZ,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;;8DACf,8OAAC,oMAAA,CAAA,QAAK;oDAAC,MAAM;oDAAI,WAAU;;;;;;gDAAgB;;;;;;;sDAG7C,8OAAC;4CACC,MAAK;4CACL,OAAO,SAAS,eAAe;4CAC/B,UAAU,CAAC,IAAM,kBAAkB,mBAAmB,EAAE,MAAM,CAAC,KAAK;4CACpE,WAAU;4CACV,QAAQ;;;;;;;;;;;;8CAKZ,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,8OAAC;4CACC,OAAO,SAAS,eAAe;4CAC/B,UAAU,CAAC,IAAM,kBAAkB,mBAAmB,SAAS,EAAE,MAAM,CAAC,KAAK;4CAC7E,WAAU;;8DAEV,8OAAC;oDAAO,OAAO;8DAAI;;;;;;8DACnB,8OAAC;oDAAO,OAAO;8DAAI;;;;;;8DACnB,8OAAC;oDAAO,OAAO;8DAAI;;;;;;8DACnB,8OAAC;oDAAO,OAAO;8DAAI;;;;;;8DACnB,8OAAC;oDAAO,OAAO;8DAAI;;;;;;8DACnB,8OAAC;oDAAO,OAAO;8DAAK;;;;;;;;;;;;;;;;;;8CAKxB,8OAAC;;sDACC,8OAAC;4CAAM,WAAU;sDAA+C;;;;;;sDAGhE,8OAAC;4CACC,OAAO,SAAS,IAAI;4CACpB,UAAU,CAAC,IAAM,kBAAkB,QAAQ,EAAE,MAAM,CAAC,KAAK;4CACzD,WAAU;;8DAEV,8OAAC;oDAAO,OAAM;8DAAe;;;;;;8DAC7B,8OAAC;oDAAO,OAAM;8DAAY;;;;;;8DAC1B,8OAAC;oDAAO,OAAM;8DAAkB;;;;;;8DAChC,8OAAC;oDAAO,OAAM;8DAAY;;;;;;8DAC1B,8OAAC;oDAAO,OAAM;8DAAc;;;;;;;;;;;;;;;;;;;;;;;;sCAMlC,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACC,MAAK;oCACL,OAAO,SAAS,cAAc,IAAI;oCAClC,UAAU,CAAC,IAAM,kBAAkB,kBAAkB,EAAE,MAAM,CAAC,KAAK;oCACnE,aAAY;oCACZ,WAAU;;;;;;;;;;;;sCAKd,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACC,OAAO,SAAS,QAAQ,IAAI;oCAC5B,UAAU,CAAC,IAAM,kBAAkB,YAAY,EAAE,MAAM,CAAC,KAAK;oCAC7D,aAAY;oCACZ,MAAM;oCACN,WAAU;;;;;;;;;;;;sCAKd,8OAAC;;8CACC,8OAAC;oCAAM,WAAU;8CAA+C;;;;;;8CAGhE,8OAAC;oCACC,OAAO,SAAS,KAAK,IAAI;oCACzB,UAAU,CAAC,IAAM,kBAAkB,SAAS,EAAE,MAAM,CAAC,KAAK;oCAC1D,aAAY;oCACZ,MAAM;oCACN,WAAU;;;;;;;;;;;;sCAKd,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,wBACC;;0DACE,8OAAC;gDAAI,WAAU;;;;;;4CAAuE;;uDAIxF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhB","debugId":null}},
    {"offset": {"line": 3012, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/app/appointments/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { \n  Calendar, \n  Search, \n  Filter, \n  Plus, \n  Eye, \n  Clock, \n  User, \n  MapPin,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  TrendingUp,\n  Users,\n  CalendarDays,\n  MoreVertical,\n  Phone,\n  Stethoscope\n} from 'lucide-react';\nimport AppointmentBookingModal from '../../src/components/AppointmentBookingModal';\n\nexport default function AppointmentsPage() {\n  const [isBookingModalOpen, setIsBookingModalOpen] = useState(false);\n\n  const handleAppointmentSuccess = (appointment: any) => {\n    console.log('Appointment created:', appointment);\n    // Refresh appointments list or update state\n    setIsBookingModalOpen(false);\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Appointments</h1>\n          <p className=\"text-gray-500 mt-1\">Manage patient appointments and schedules</p>\n        </div>\n        <button \n          onClick={() => setIsBookingModalOpen(true)}\n          className=\"flex items-center bg-orange-500 hover:bg-orange-600 text-white px-4 py-2.5 rounded-xl font-medium text-sm transition-all duration-200 shadow-sm hover:shadow-md\"\n        >\n          <Plus size={16} className=\"mr-2\" />\n          New Appointment\n        </button>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs font-semibold text-gray-600 uppercase tracking-wide\">Today's Appointments</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">42</p>\n              <div className=\"flex items-center mt-2\">\n                <TrendingUp className=\"h-3 w-3 text-green-500 mr-1\" />\n                <span className=\"text-sm font-medium text-green-600\">+8 from yesterday</span>\n              </div>\n            </div>\n            <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center\">\n              <Calendar className=\"text-white\" size={20} />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs font-semibold text-gray-600 uppercase tracking-wide\">Completed</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">28</p>\n              <div className=\"flex items-center mt-2\">\n                <CheckCircle className=\"h-3 w-3 text-green-500 mr-1\" />\n                <span className=\"text-sm font-medium text-green-600\">67% success rate</span>\n              </div>\n            </div>\n            <div className=\"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center\">\n              <CheckCircle className=\"text-white\" size={20} />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs font-semibold text-gray-600 uppercase tracking-wide\">Pending</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">12</p>\n              <div className=\"flex items-center mt-2\">\n                <Clock className=\"h-3 w-3 text-orange-500 mr-1\" />\n                <span className=\"text-sm font-medium text-orange-600\">Next at 10:30 AM</span>\n              </div>\n            </div>\n            <div className=\"w-12 h-12 bg-gradient-to-r from-orange-300 to-orange-400 rounded-xl flex items-center justify-center\">\n              <Clock className=\"text-white\" size={20} />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-xs font-semibold text-gray-600 uppercase tracking-wide\">Cancelled</p>\n              <p className=\"text-2xl font-bold text-gray-900 mt-1\">2</p>\n              <div className=\"flex items-center mt-2\">\n                <XCircle className=\"h-3 w-3 text-red-500 mr-1\" />\n                <span className=\"text-sm font-medium text-red-600\">5% cancellation</span>\n              </div>\n            </div>\n            <div className=\"w-12 h-12 bg-gradient-to-r from-red-500 to-red-600 rounded-xl flex items-center justify-center\">\n              <XCircle className=\"text-white\" size={20} />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          <div className=\"flex-1 relative\">\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n              <Search className=\"h-4 w-4 text-gray-400\" />\n            </div>\n            <input\n              type=\"text\"\n              placeholder=\"Search appointments by patient name, doctor, or ID...\"\n              className=\"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n            />\n          </div>\n          <div className=\"flex gap-2\">\n            <button className=\"flex items-center px-4 py-2.5 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors\">\n              <Filter size={16} className=\"mr-2\" />\n              Filter\n            </button>\n            <select className=\"px-4 py-2.5 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-orange-500\">\n              <option>All Status</option>\n              <option>Scheduled</option>\n              <option>Completed</option>\n              <option>Cancelled</option>\n              <option>No Show</option>\n            </select>\n            <select className=\"px-4 py-2.5 border border-gray-200 rounded-xl text-sm font-medium text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-orange-500\">\n              <option>Today</option>\n              <option>This Week</option>\n              <option>This Month</option>\n              <option>Custom Range</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Appointments List */}\n      <div className=\"space-y-4\">\n        {/* Appointment Card 1 */}\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-sm\">\n                10:00\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">Yogitha S</h3>\n                <p className=\"text-sm text-gray-500\">AH25075452  Cardiology Consultation</p>\n                <div className=\"flex items-center mt-1 space-x-4\">\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Stethoscope size={12} className=\"mr-1\" />\n                    Dr. Priya Sharma\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <MapPin size={12} className=\"mr-1\" />\n                    ROOM001\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Phone size={12} className=\"mr-1\" />\n                    9988778899\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full\">\n                Scheduled\n              </span>\n              <div className=\"flex items-center space-x-2\">\n                <button className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\">\n                  <Eye size={16} />\n                </button>\n                <button className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\">\n                  <MoreVertical size={16} />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Appointment Card 2 */}\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center text-white font-bold text-sm\">\n                09:30\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">James Wilson</h3>\n                <p className=\"text-sm text-gray-500\">PAT002  Emergency Medicine Consultation</p>\n                <div className=\"flex items-center mt-1 space-x-4\">\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Stethoscope size={12} className=\"mr-1\" />\n                    Dr. Amit Singh\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <MapPin size={12} className=\"mr-1\" />\n                    ROOM004\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Phone size={12} className=\"mr-1\" />\n                    +1-555-123-4567\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"px-3 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\">\n                Completed\n              </span>\n              <div className=\"flex items-center space-x-2\">\n                <button className=\"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors\">\n                  <Eye size={16} />\n                </button>\n                <button className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\">\n                  <MoreVertical size={16} />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Appointment Card 3 */}\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl flex items-center justify-center text-white font-bold text-sm\">\n                14:15\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">Olivia Martinez</h3>\n                <p className=\"text-sm text-gray-500\">PAT003  Pediatric Consultation</p>\n                <div className=\"flex items-center mt-1 space-x-4\">\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Stethoscope size={12} className=\"mr-1\" />\n                    Dr. Rajesh Kumar\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <MapPin size={12} className=\"mr-1\" />\n                    ROOM002\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Phone size={12} className=\"mr-1\" />\n                    +1-555-987-6543\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"px-3 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full\">\n                Scheduled\n              </span>\n              <div className=\"flex items-center space-x-2\">\n                <button className=\"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\">\n                  <Eye size={16} />\n                </button>\n                <button className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\">\n                  <MoreVertical size={16} />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Appointment Card 4 */}\n        <div className=\"bg-white rounded-2xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow duration-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-12 h-12 bg-gradient-to-r from-orange-600 to-red-500 rounded-xl flex items-center justify-center text-white font-bold text-sm\">\n                11:45\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-gray-900\">Noah Parker</h3>\n                <p className=\"text-sm text-gray-500\">PAT004  Orthopedic Consultation</p>\n                <div className=\"flex items-center mt-1 space-x-4\">\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Stethoscope size={12} className=\"mr-1\" />\n                    Dr. Sunita Patel\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <MapPin size={12} className=\"mr-1\" />\n                    ROOM003\n                  </div>\n                  <div className=\"flex items-center text-xs text-gray-600\">\n                    <Phone size={12} className=\"mr-1\" />\n                    +1-555-234-5678\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-3\">\n              <span className=\"px-3 py-1 bg-red-100 text-red-800 text-xs font-medium rounded-full\">\n                Cancelled\n              </span>\n              <div className=\"flex items-center space-x-2\">\n                <button className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\">\n                  <Eye size={16} />\n                </button>\n                <button className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\">\n                  <MoreVertical size={16} />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Load More */}\n      <div className=\"flex justify-center\">\n        <button className=\"bg-white border border-gray-200 text-gray-700 px-6 py-2.5 rounded-xl font-medium text-sm hover:bg-gray-50 transition-colors\">\n          Load More Appointments\n        </button>\n      </div>\n\n      {/* Appointment Booking Modal */}\n      <AppointmentBookingModal\n        isOpen={isBookingModalOpen}\n        onClose={() => setIsBookingModalOpen(false)}\n        onSuccess={handleAppointmentSuccess}\n      />\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}